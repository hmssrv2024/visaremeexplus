<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>REMEEX - Retiro de Fondos</title>
  <link rel="icon" href="https://w7.pngwing.com/pngs/400/28/png-transparent-credit-card-computer-icons-visa-electron-bank-curio-blue-text-rectangle-thumbnail.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/v-mask@2.3.0/dist/v-mask.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>

  <style>
    :root {
      /* Paleta de colores moderna basada en estilo Revolut/N26 */
      --primary: #1a1f71;
      --primary-dark: #0c1045;
      --primary-light: #3244b6;
      --secondary: #00579f;
      --accent: #f7b600;
      --success: #00d34d;
      --danger: #ff4d4d;
      --warning: #ffad33;
      --info: #0095ff;
      --neutral-100: #ffffff;
      --neutral-200: #f5f7fa;
      --neutral-300: #eaecf0;
      --neutral-400: #d0d5dd;
      --neutral-500: #9da4b4;
      --neutral-600: #6e7891;
      --neutral-700: #4f5d75;
      --neutral-800: #293249;
      --neutral-900: #1a1f37;

      /* Sombras y efectos */
      --shadow-sm: 0 1px 3px rgba(16, 24, 40, 0.1);
      --shadow-md: 0 4px 8px -2px rgba(16, 24, 40, 0.1), 0 2px 4px -2px rgba(16, 24, 40, 0.06);
      --shadow-lg: 0 12px 16px -4px rgba(16, 24, 40, 0.08), 0 4px 6px -2px rgba(16, 24, 40, 0.03);
      --shadow-xl: 0 20px 24px -4px rgba(16, 24, 40, 0.08), 0 8px 8px -4px rgba(16, 24, 40, 0.03);
      
      /* Border radius */
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      
      /* Transiciones */
      --transition-fast: all 0.2s ease;
      --transition-base: all 0.3s ease;
      --transition-slow: all 0.5s ease;
      
      /* Gradientes de tarjeta */
      --card-gradient: linear-gradient(135deg, #1a1f71 0%, #0c1045 100%);
      --success-gradient: linear-gradient(135deg, #00c057 0%, #00a346 100%);
      
      /* Animaciones */
      --animation-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--neutral-200);
      color: var(--neutral-900);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      height: 100vh;
      margin: 0;
      position: relative;
    }
    
    /* Scrollbars */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--neutral-200);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--neutral-500);
      border-radius: var(--radius-full);
    }
    
    /* Header */
    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem 1rem;
      background: var(--neutral-100);
      border-bottom: 1px solid var(--neutral-300);
      box-shadow: var(--shadow-sm);
      z-index: 1000;
      height: 60px;
    }
    
    .header-brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .header-brand img {
      height: 32px;
      width: auto;
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .header-action-btn {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--neutral-200);
      color: var(--neutral-700);
      border: none;
      cursor: pointer;
      transition: var(--transition-base);
      position: relative;
    }

    .back-btn {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--neutral-200);
      color: var(--neutral-700);
      text-decoration: none;
      margin-right: 0.5rem;
      transition: var(--transition-base);
    }

    .back-btn:hover {
      background: var(--neutral-300);
      color: var(--neutral-900);
    }
    
    .header-action-btn:hover {
      background: var(--neutral-300);
      color: var(--neutral-900);
    }
    
    .notification-badge {
      position: absolute;
      top: -2px;
      right: -2px;
      background: var(--danger);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.6rem;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }
    
    /* Badge de usuarios conectados */
    .users-online-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.5rem;
      background: rgba(26, 31, 113, 0.08);
      border-radius: var(--radius-md);
      font-size: 0.7rem;
      color: var(--primary);
      font-weight: 500;
      white-space: nowrap;
    }
    
    .users-online-badge i {
      font-size: 0.7rem;
    }
    
    .pulse-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--success);
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(0, 211, 77, 0.7);
      }
      
      70% {
        transform: scale(1);
        box-shadow: 0 0 0 4px rgba(0, 211, 77, 0);
      }
      
      100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(0, 211, 77, 0);
      }
    }
    
    /* Tarjeta de saldo */
    .balance-card {
      background: var(--card-gradient);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      color: white;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      margin-bottom: 1.25rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .balance-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-xl);
    }
    
    .balance-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      animation: shine 3s infinite;
    }
    
    @keyframes shine {
      100% { left: 200%; }
    }
    
    .card-decoration {
      position: absolute;
      right: -50px;
      bottom: -50px;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
      z-index: 1;
    }
    
    .card-decoration:nth-child(2) {
      left: -30px;
      top: -30px;
      width: 150px;
      height: 150px;
    }
    
    .balance-content {
      position: relative;
      z-index: 2;
    }
    
    .balance-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .balance-label {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .balance-label i {
      font-size: 0.9rem;
    }
    
    .balance-amount {
      font-size: clamp(1.5rem, 5vw, 2.25rem);
      font-weight: 700;
      margin: 0.5rem 0 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: nowrap;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .currency-flag {
      width: 20px;
      height: 14px;
      border-radius: 2px;
      object-fit: cover;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      flex-shrink: 0;
    }
    
    .balance-equivalents {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }
    
    .balance-equivalent {
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md);
      padding: 0.4rem 0.6rem;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      backdrop-filter: blur(5px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      white-space: nowrap;
    }
    
    .exchange-rate {
      background: rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-md);
      padding: 0.4rem 0.6rem;
      font-size: 0.75rem;
      margin-bottom: 0.75rem;
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    
    .balance-date {
      font-size: 0.7rem;
      opacity: 0.7;
      margin-bottom: 1rem;
    }
    
    .balance-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 0.75rem;
    }
    
    .balance-btn {
      flex: 1;
      border: none;
      border-radius: var(--radius-md);
      height: 42px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.8rem;
      background: rgba(255,255,255,0.15);
      color: white;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
      backdrop-filter: blur(5px);
      white-space: nowrap;
    }
    
    .balance-btn:hover {
      background: rgba(255,255,255,0.25);
      transform: translateY(-3px);
    }
    
    .balance-btn:active {
      transform: translateY(0);
    }
    
    .balance-btn i {
      margin-right: 6px;
      font-size: 0.9rem;
    }
    
    /* Layout del Dashboard */
    .app-container {
      padding-top: 70px;
      padding-bottom: 70px;
      max-width: 100%;
      margin: 0 auto;
      height: 100vh;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    }
    
    .dashboard-content {
      padding: 0.75rem;
      max-width: 1200px;
      margin: 0 auto;
    }
   
    /* Secciones */
    .section-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--neutral-900);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .section-title i {
      margin-right: 0.5rem;
      color: var(--primary);
    }
    
    .section-title a {
      font-size: 0.7rem;
      color: var(--primary);
      text-decoration: none;
    }
    
    /* Tarjetas */
    .card {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: 1rem;
      margin-bottom: 1.25rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    /* Navegación Inferior */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--neutral-100);
      display: flex;
      justify-content: space-around;
      padding: 0.5rem 0;
      box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
      z-index: 900;
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      padding: 0.4rem;
      border-radius: var(--radius-md);
      transition: var(--transition-base);
      cursor: pointer;
      flex: 1;
      text-decoration: none;
      color: var(--neutral-600);
    }
    
    .nav-item.active {
      color: var(--primary);
    }
    
    .nav-icon {
      font-size: 1.1rem;
      transition: transform 0.3s var(--animation-bounce);
    }
    
    .nav-item:hover .nav-icon {
      transform: translateY(-3px);
    }
    
    .nav-label {
      font-size: 0.6rem;
      font-weight: 600;
    }

    /* Contenedor de Retiro */
    .withdrawal-container {
      padding: 1rem;
      padding-top: 70px;
      padding-bottom: 70px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    /* Timeline */
    .timeline-container {
      position: relative;
      margin: 1.5rem 0;
      padding: 0 1rem;
    }
    
    .timeline {
      display: flex;
      justify-content: space-between;
      position: relative;
      margin-bottom: 2rem;
    }
    
    .timeline::before {
      content: '';
      position: absolute;
      top: 1.25rem;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--neutral-400);
      z-index: 1;
    }
    
    .timeline-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
      width: 25%;
    }
    
    .timeline-icon {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: var(--radius-full);
      background: var(--neutral-300);
      color: var(--neutral-600);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      margin-bottom: 0.5rem;
      box-shadow: var(--shadow-sm);
    }
    
    .timeline-step.active .timeline-icon {
      background: var(--primary);
      color: white;
    }
    
    .timeline-step.completed .timeline-icon {
      background: var(--success);
      color: white;
    }
    
    .timeline-label {
      font-size: 0.7rem;
      text-align: center;
      color: var(--neutral-600);
      max-width: 80px;
      line-height: 1.2;
    }
    
    .timeline-step.active .timeline-label {
      color: var(--primary);
      font-weight: 600;
    }
    
    .timeline-step.completed .timeline-label {
      color: var(--success);
      font-weight: 600;
    }
    
    /* Progreso entre pasos de timeline */
    .timeline-progress {
      position: absolute;
      top: 1.25rem;
      left: 0;
      height: 3px;
      background: var(--success);
      z-index: 1;
      transition: width 0.5s ease;
    }
    
    /* Estilos de Formulario */
    .form-group {
      margin-bottom: 1.25rem;
    }
    
    .form-label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--neutral-700);
      margin-bottom: 0.5rem;
    }
    
    .form-control {
      width: 100%;
      height: 48px;
      padding: 0 1rem;
      border: 1px solid var(--neutral-400);
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      color: var(--neutral-900);
      background: var(--neutral-100);
      transition: var(--transition-base);
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26, 31, 113, 0.15);
    }
    
    .error-message {
      font-size: 0.7rem;
      color: var(--danger);
      margin-top: 0.5rem;
      display: none;
    }
    
    /* Etiqueta de ayuda */
    .help-text {
      font-size: 0.7rem;
      color: var(--neutral-600);
      margin-top: 0.5rem;
    }
    
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 48px;
      padding: 0 1.5rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.9rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
      width: 100%;
    }
    
    .btn-primary:hover {
      background: var(--primary-light);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    .btn-outline {
      background: transparent;
      border: 1px solid var(--primary);
      color: var(--primary);
    }
    
    .btn-outline:hover {
      background: rgba(26, 31, 113, 0.05);
      transform: translateY(-3px);
    }
    
    .btn:disabled {
      background: var(--neutral-400);
      color: var(--neutral-600);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .btn i {
      margin-right: 0.5rem;
      font-size: 0.9rem;
    }
    
    /* Métodos de Pago */
    .method-options {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .method-option {
      flex: 1;
      min-width: 100px;
      background: var(--neutral-200);
      border: 2px solid var(--neutral-300);
      border-radius: var(--radius-md);
      padding: 1rem;
      cursor: pointer;
      transition: var(--transition-base);
      text-align: center;
    }
    
    .method-option:hover {
      background: var(--neutral-100);
      border-color: var(--neutral-400);
      transform: translateY(-3px);
      box-shadow: var(--shadow-sm);
    }
    
    .method-option.active {
      background: var(--neutral-100);
      border-color: var(--primary);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .method-icon {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    
    .method-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-800);
    }
    
    .method-description {
      font-size: 0.7rem;
      color: var(--neutral-600);
      margin-top: 0.25rem;
    }
    
    /* Selección de Banco */
    .bank-selection {
      display: none;
      margin-top: 1.5rem;
    }
    
    .bank-selection.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    /* Nueva grilla de logos de bancos */
    .bank-logo-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }
    
    @media (max-width: 768px) {
      .bank-logo-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 480px) {
      .bank-logo-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .bank-logo-item {
      background: var(--neutral-200);
      border: 2px solid var(--neutral-300);
      border-radius: var(--radius-md);
      padding: 1rem 0.75rem;
      cursor: pointer;
      transition: var(--transition-base);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    
    .bank-logo-item:hover {
      background: var(--neutral-100);
      border-color: var(--neutral-400);
      transform: translateY(-3px);
      box-shadow: var(--shadow-sm);
    }
    
    .bank-logo-item.active {
      background: var(--neutral-100);
      border-color: var(--primary);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .bank-logo-container {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0.5rem;
    }
    
    .bank-logo {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    
    .bank-name {
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--neutral-800);
      margin-top: 0.5rem;
    }
    
    /* Detalles de la Cuenta */
    .account-details {
      margin-top: 1.5rem;
      display: none;
    }
    
    .account-details.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    /* Badge de Seguridad */
    .security-badge {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      background: rgba(26, 31, 113, 0.05);
      border-radius: var(--radius-md);
      padding: 0.75rem;
      margin-bottom: 1.25rem;
    }
    
    .security-badge-icon {
      width: 30px;
      height: 30px;
      background: var(--primary);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.9rem;
      flex-shrink: 0;
    }
    
    .security-badge-content {
      flex: 1;
      min-width: 0;
    }
    
    .security-badge-title {
      font-weight: 600;
      font-size: 0.8rem;
      color: var(--neutral-900);
      margin-bottom: 0.125rem;
    }
    
    .security-badge-text {
      font-size: 0.7rem;
      color: var(--neutral-600);
      white-space: normal;
    }
    
    /* Banner de Verificación Mejorado */
    .verify-banner {
      background: linear-gradient(135deg, var(--info) 0%, #0077cc 100%);
      border-radius: var(--radius-md);
      padding: 1rem;
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      margin: 1.25rem 0;
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
    }
    
    .verify-banner::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
      pointer-events: none;
    }
    
    .verify-icon {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--info);
      font-size: 1.1rem;
      flex-shrink: 0;
      box-shadow: var(--shadow-md);
    }
    
    .verify-content {
      flex: 1;
      min-width: 0;
    }
    
    .verify-title {
      font-weight: 600;
      color: white;
      margin-bottom: 0.25rem;
      font-size: 1rem;
    }
    
    .verify-text {
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
    }
    
    .verify-benefits {
      margin-top: 0.75rem;
    }
    
    .verify-benefit-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.3rem;
      color: white;
      font-size: 0.8rem;
    }
    
    .verify-benefit-item i {
      color: #f7b600;
      font-size: 0.9rem;
    }
    
    .verify-action {
      background: white;
      color: var(--info);
      font-weight: 600;
      font-size: 0.8rem;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-md);
      flex-shrink: 0;
      transition: all 0.3s var(--animation-bounce);
      cursor: pointer;
      border: none;
      white-space: nowrap;
      box-shadow: var(--shadow-md);
      margin-top: 0.75rem;
    }
    
    .verify-action:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
      background: #f8f9fa;
    }

    /* Detalles del Banco */
    .bank-details {
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1.1rem;
      margin: 1.25rem 0;
    }
    
    .bank-detail-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--neutral-300);
    }
    
    .bank-detail-row:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }
    
    .bank-detail-label {
      font-size: 0.8rem;
      color: var(--neutral-600);
      flex-shrink: 0;
      margin-right: 0.5rem;
    }
    
    .bank-detail-value {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-900);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-align: right;
      word-break: break-word;
      flex-grow: 1;
    }
    
    .copy-btn {
      background: var(--neutral-300);
      color: var(--neutral-700);
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: var(--transition-base);
      flex-shrink: 0;
    }
    
    .copy-btn:hover {
      background: var(--primary);
      color: white;
    }
    
    /* Notificaciones Toast */
    .toast-container {
      position: fixed;
      top: 70px;
      right: 16px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .toast {
      background: var(--neutral-900);
      color: white;
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      min-width: 250px;
      max-width: 320px;
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: slideInRight 0.3s ease, fadeOut 0.3s ease 3s forwards;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--danger);
    }
    
    .toast.warning {
      border-left: 4px solid var(--warning);
    }
    
    .toast.info {
      border-left: 4px solid var(--info);
    }
    
    .toast-icon {
      flex-shrink: 0;
    }
    
    .toast-content {
      flex: 1;
      min-width: 0;
    }
    
    .toast-title {
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 0.2rem;
    }
    
    .toast-message {
      font-size: 0.75rem;
      opacity: 0.9;
      word-wrap: break-word;
    }
    
    .toast-close {
      color: var(--neutral-400);
      cursor: pointer;
      transition: var(--transition-base);
      flex-shrink: 0;
    }
    
    .toast-close:hover {
      color: white;
    }
    
    /* Sección de Contacto */
    .contact-options {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 1.25rem;
    }
    
    .contact-option {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.9rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      transition: all 0.3s ease;
      text-decoration: none;
      color: var(--neutral-900);
    }
    
    .contact-option:hover {
      background: var(--neutral-300);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .contact-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      flex-shrink: 0;
      color: white;
    }
    
    .contact-icon.whatsapp {
      background: #25D366;
    }
    
    .contact-icon.email {
      background: var(--primary);
    }

    .contact-icon.chat {
      background: var(--info);
    }

    .contact-icon.reviews {
      background: var(--warning);
    }
    
    .contact-content {
      flex: 1;
      min-width: 0;
    }
    
    .contact-title {
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 0.2rem;
    }
    
    .contact-description {
      font-size: 0.75rem;
      color: var(--neutral-600);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Cargando */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1100;
    }
    
    .spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
      margin-bottom: 1.5rem;
    }
    
    .loading-text {
      color: white;
      font-size: 1rem;
      margin-bottom: 1.5rem;
      font-weight: 500;
    }
    
    .progress-bar-container {
      width: 80%;
      max-width: 280px;
      height: 8px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: white;
      width: 0%;
      border-radius: var(--radius-full);
      transition: width 0.3s ease;
    }

    /* Modal de Verificación Mejorado */
    .verification-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1100;
    }
    
    .verification-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 500px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .verification-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .verification-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    
    .verification-subtitle {
      font-size: 0.85rem;
      color: var(--neutral-600);
    }
    
    .verification-steps {
      margin-bottom: 1.5rem;
    }
    
    .verification-step {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.25rem;
      background: var(--neutral-200);
      padding: 1rem;
      border-radius: var(--radius-md);
    }
    
    .verification-step-number {
      width: 24px;
      height: 24px;
      border-radius: var(--radius-full);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 600;
      flex-shrink: 0;
    }
    
    .verification-step-content {
      flex: 1;
    }
    
    .verification-step-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--neutral-900);
      margin-bottom: 0.25rem;
    }
    
    .verification-step-description {
      font-size: 0.8rem;
      color: var(--neutral-600);
    }
    
    .verification-actions {
      display: flex;
      gap: 1rem;
    }
    
    /* Nueva sección de Transacciones en Proceso */
    .pending-transactions {
      margin-top: 2rem;
    }
    
    .pending-transaction-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      margin-bottom: 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      border-left: 4px solid var(--warning);
    }
    
    .pending-transaction-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-full);
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--warning);
      margin-right: 1rem;
      flex-shrink: 0;
    }
    
    .pending-transaction-content {
      flex: 1;
    }
    
    .pending-transaction-title {
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 0.25rem;
    }
    
    .pending-transaction-info {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    .pending-transaction-amount {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--neutral-900);
      margin-left: 1rem;
    }
    
    /* Historial de Transacciones */
    .transaction-history {
      margin-top: 2rem;
    }
    
    .transaction-history-item {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      border-left: 4px solid var(--success);
    }
    
    .transaction-history-icon {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--success);
      margin-right: 1rem;
      flex-shrink: 0;
    }
    
    .transaction-history-content {
      flex: 1;
    }
    
    .transaction-history-title {
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 0.25rem;
    }
    
    .transaction-history-info {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    .transaction-history-date {
      font-size: 0.7rem;
      color: var(--neutral-500);
      margin-top: 0.2rem;
    }
    
    .transaction-history-amount {
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--neutral-900);
      margin-left: 1rem;
    }
    
    /* Tabs de navegación */
    .tabs-container {
      margin: 1.5rem 0;
    }
    
    .tabs-header {
      display: flex;
      border-bottom: 1px solid var(--neutral-300);
      margin-bottom: 1rem;
    }
    
    .tab-item {
      padding: 0.75rem 1rem;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--neutral-600);
      border-bottom: 2px solid transparent;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .tab-item.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
      font-weight: 600;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }

    /* Modal de Recibo de Retiro */
    .receipt-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1100;
    }
    
    .receipt-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 380px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .receipt-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .receipt-logo {
      height: 45px;
      width: auto;
      margin-bottom: 1rem;
    }
    
    .receipt-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.5rem;
    }
    
    .receipt-subtitle {
      font-size: 0.85rem;
      color: var(--neutral-600);
    }
    
    .receipt-amount {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 1rem 0;
      text-align: center;
    }
    
    .receipt-details {
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .receipt-detail-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      font-size: 0.85rem;
    }
    
    .receipt-detail-row:last-child {
      margin-bottom: 0;
    }
    
    .receipt-detail-label {
      color: var(--neutral-600);
    }
    
    .receipt-detail-value {
      color: var(--neutral-900);
      font-weight: 500;
    }
    
    .receipt-message {
      text-align: center;
      font-size: 0.85rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
    }
    
    .receipt-actions {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .receipt-share {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .receipt-share-btn {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-full);
      background: var(--neutral-200);
      color: var(--neutral-600);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .receipt-share-btn:hover {
      background: var(--neutral-300);
      transform: translateY(-3px);
    }

    /* Modal de Información de Seguridad */
    .security-info-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1200;
    }
    
    .security-info-content {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 600px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    
    .security-info-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--neutral-800);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      cursor: pointer;
      z-index: 10;
    }
    
    .faq-container {
      margin: 1.5rem 0;
    }
    
    .faq-item {
      border-bottom: 1px solid var(--neutral-300);
      margin-bottom: 0.5rem;
    }
    
    .faq-header {
      padding: 1rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      font-weight: 600;
      color: var(--neutral-800);
    }
    
    .faq-content {
      padding: 0 0 1rem 0;
      color: var(--neutral-600);
      display: none;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    
    .info-link {
      color: var(--primary);
      text-decoration: underline;
      cursor: pointer;
    }
    
    /* Estilo para badges de información */
    .info-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      font-size: 0.7rem;
      margin-left: 0.5rem;
      cursor: pointer;
    }

    /* Tiempo restante antes de redirección por inactividad */
    .time-remaining {
      position: fixed;
      bottom: 80px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 0.75rem;
      color: var(--neutral-500);
      padding: 0.5rem;
      background: var(--neutral-200);
      z-index: 899;
    }
    
    .time-remaining-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 2px;
      background: var(--primary);
      transition: width 1s linear;
    }
    
    /* Estados de transacción mejorados */
    .status-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.3rem 0.5rem;
      border-radius: var(--radius-md);
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    .status-badge.pending {
      background: rgba(255, 173, 51, 0.1);
      color: var(--warning);
    }
    
    .status-badge.verified {
      background: rgba(0, 211, 77, 0.1);
      color: var(--success);
    }
    
    .status-badge.processing {
      background: rgba(0, 149, 255, 0.1);
      color: var(--info);
    }
    
    .status-badge.rejected {
      background: rgba(255, 77, 77, 0.1);
      color: var(--danger);
    }
    
    /* Animaciones */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; visibility: hidden; }
    }
    
    /* Nuevos estilos - Prueba social y elementos visuales */
    .social-proof {
      margin: 1.25rem 0;
      padding: 1rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
    }
    
    .testimonial-container {
      position: relative;
      margin-top: 1rem;
      overflow: hidden;
    }
    
    .testimonial-slider {
      display: flex;
      transition: transform 0.5s ease;
    }
    
    .testimonial {
      min-width: 100%;
      padding: 0.75rem;
      box-sizing: border-box;
    }
    
    .testimonial-content {
      background: white;
      padding: 1rem;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      font-size: 0.85rem;
      color: var(--neutral-700);
      position: relative;
    }
    
    .testimonial-content::before {
      content: '\201C';
      font-size: 2rem;
      color: var(--primary-light);
      opacity: 0.2;
      position: absolute;
      top: 5px;
      left: 10px;
      line-height: 1;
    }
    
    .testimonial-author {
      display: flex;
      align-items: center;
      margin-top: 0.75rem;
      gap: 0.5rem;
    }
    
    .testimonial-avatar {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--primary-light);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.7rem;
    }
    
    .testimonial-name {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-800);
    }
    
    .testimonial-date {
      font-size: 0.7rem;
      color: var(--neutral-500);
      margin-left: auto;
    }
    
    .stats-container {
      display: flex;
      justify-content: space-around;
      margin: 1rem 0;
      text-align: center;
    }
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .stat-value {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.7rem;
      color: var(--neutral-600);
      margin-top: 0.25rem;
    }

    .live-indicator {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.7rem;
      color: var(--success);
      font-weight: 500;
    }
    
    .live-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--success);
      animation: pulse 1.5s infinite;
    }

    .last-step-banner {
      background: linear-gradient(45deg, var(--success) 0%, #88de7c 100%);
      color: white;
      padding: 1rem;
      border-radius: var(--radius-md);
      margin: 1.25rem 0;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }

    .last-step-content {
      position: relative;
      z-index: 2;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .last-step-icon {
      width: 60px;
      height: 60px;
      flex-shrink: 0;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
    }

    .last-step-icon img {
      width: 70%;
      height: auto;
    }

    .last-step-text {
      flex: 1;
    }

    .last-step-title {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }

    .progress-visualization {
      position: relative;
      height: 10px;
      background: var(--neutral-200);
      border-radius: var(--radius-full);
      margin: 2rem 0 1rem;
      overflow: hidden;
    }
    
    .progress-bar-custom {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, var(--primary) 0%, var(--success) 100%);
      border-radius: var(--radius-full);
      transition: width 1s ease;
    }
    
    .progress-icon {
      position: absolute;
      top: -10px;
      left: 0;
      transform: translateX(-50%);
      width: 30px;
      height: 30px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
      transition: left 1s ease;
    }
    
    .progress-icon img {
      width: 80%;
      height: auto;
    }
    
    .progress-steps {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
      position: relative;
    }
    
    .progress-step {
      text-align: center;
      flex: 1;
      position: relative;
    }
    
    .progress-step::before {
      content: '';
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 8px;
      background: var(--neutral-300);
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }
    
    .progress-step.active::before {
      background: var(--primary);
    }
    
    .progress-step.completed::before {
      background: var(--success);
    }
    
    .progress-step-label {
      font-size: 0.7rem;
      color: var(--neutral-600);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding: 0 5px;
    }
    
    .progress-step.active .progress-step-label {
      color: var(--primary);
      font-weight: 500;
    }
    
    .progress-step.completed .progress-step-label {
      color: var(--success);
      font-weight: 500;
    }
    
    .progress-step-info {
      margin-top: 0.5rem;
      font-size: 0.7rem;
      color: var(--neutral-500);
    }
    
    /* Nuevas clases para la guía de verificación mejorada */
    .verification-guide-enhanced {
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e7ec 100%);
      border-radius: var(--radius-md);
      padding: 1.25rem;
      margin: 1.5rem 0;
      border-left: 4px solid var(--primary);
      position: relative;
      box-shadow: var(--shadow-md);
      overflow: hidden;
      animation: pulse-border 2s infinite;
    }
    
    @keyframes pulse-border {
      0% { border-left-color: var(--primary); }
      50% { border-left-color: var(--info); }
      100% { border-left-color: var(--primary); }
    }
    
    .verification-guide-enhanced::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 120px;
      height: 120px;
      background: radial-gradient(circle, rgba(26, 31, 113, 0.05) 0%, rgba(26, 31, 113, 0) 70%);
      border-radius: 50%;
    }
    
    .verification-guide-enhanced-title {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 1.2rem;
      font-weight: 700;
      color: var(--primary);
      font-size: 1.1rem;
    }
    
    .verification-guide-enhanced-title i {
      color: var(--primary);
      font-size: 1.3rem;
    }
    
    .verification-guide-steps {
      margin-left: 0.5rem;
      counter-reset: step-counter;
    }
    
    .verification-guide-step {
      position: relative;
      padding-left: 2.5rem;
      padding-bottom: 1rem;
      margin-bottom: 1rem;
      border-left: 2px dashed var(--neutral-400);
    }
    
    .verification-guide-step:last-child {
      border-left: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .verification-guide-step::before {
      counter-increment: step-counter;
      content: counter(step-counter);
      position: absolute;
      left: -12px;
      top: 0;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.8rem;
    }
    
    .verification-guide-step-title {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--neutral-800);
      margin-bottom: 0.4rem;
    }
    
    .verification-guide-step-description {
      font-size: 0.85rem;
      color: var(--neutral-700);
      margin-bottom: 0.5rem;
      line-height: 1.4;
    }
    
    .verification-guide-step-note {
      font-size: 0.8rem;
      color: var(--info);
      font-style: italic;
      line-height: 1.4;
    }
    
    .verification-guide-footer {
      margin-top: 1.25rem;
      padding-top: 1rem;
      border-top: 1px solid var(--neutral-300);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
      color: var(--primary);
      font-weight: 500;
    }
    
    .verification-amount-highlight {
      font-weight: 700;
      color: var(--primary);
      background: rgba(26, 31, 113, 0.1);
      padding: 0.2rem 0.4rem;
      border-radius: var(--radius-sm);
      white-space: nowrap;
    }
    
    /* Custom checkbox para confirmación de lectura */
    .checkbox-container {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      margin: 1rem 0;
      padding: 0.8rem;
      border-radius: var(--radius-md);
      background: rgba(0, 149, 255, 0.05);
      transition: background-color 0.3s ease;
    }
    
    .checkbox-container.checked {
      background: rgba(0, 211, 77, 0.1);
    }
    
    .checkbox-wrapper {
      position: relative;
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      margin-top: 0.1rem;
    }
    
    .verification-checkbox {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .checkbox-custom {
      position: absolute;
      top: 0;
      left: 0;
      width: 20px;
      height: 20px;
      border: 2px solid var(--neutral-400);
      border-radius: 4px;
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .verification-checkbox:checked + .checkbox-custom {
      background: var(--success);
      border-color: var(--success);
    }
    
    .verification-checkbox:checked + .checkbox-custom::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 7px;
      width: 4px;
      height: 8px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }
    
    .verification-checkbox:focus + .checkbox-custom {
      box-shadow: 0 0 0 3px rgba(0, 149, 255, 0.2);
    }
    
    .checkbox-label {
      font-size: 0.9rem;
      color: var(--neutral-700);
      line-height: 1.4;
    }
    
    /* Modal de confirmación */
    .confirmation-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1200;
    }
    
    .confirmation-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 450px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .confirmation-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--neutral-300);
    }
    
    .confirmation-icon {
      width: 60px;
      height: 60px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.8rem;
      flex-shrink: 0;
    }
    
    .confirmation-title-container {
      flex: 1;
    }
    
    .confirmation-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.3rem;
    }
    
    .confirmation-subtitle {
      font-size: 0.9rem;
      color: var(--neutral-600);
    }
    
    .confirmation-content {
      margin-bottom: 1.5rem;
    }
    
    .confirmation-message {
      font-size: 0.95rem;
      color: var(--neutral-700);
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    
    .confirmation-step {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    
    .confirmation-step-number {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.85rem;
      flex-shrink: 0;
    }
    
    .confirmation-step-text {
      font-size: 0.9rem;
      color: var(--neutral-800);
      line-height: 1.4;
    }
    
    .confirmation-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    
    .confirmation-btn {
      flex: 1;
      padding: 0.75rem 1rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .confirmation-btn-primary {
      background: var(--primary);
      color: white;
      border: none;
    }
    
    .confirmation-btn-primary:hover {
      background: var(--primary-light);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .confirmation-btn-secondary {
      background: transparent;
      border: 1px solid var(--neutral-400);
      color: var(--neutral-700);
    }
    
    .confirmation-btn-secondary:hover {
      background: var(--neutral-200);
      transform: translateY(-3px);
    }
    
    .funds-journey {
      position: relative;
      margin: 2rem 0;
    }
    
    .journey-visualization {
      display: flex;
      align-items: center;
      background: var(--neutral-200);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      position: relative;
      overflow: hidden;
    }
    
    .journey-from {
      position: relative;
      z-index: 2;
      flex-shrink: 0;
      text-align: center;
    }
    
    .journey-to {
      position: relative;
      z-index: 2;
      flex-shrink: 0;
      text-align: center;
    }
    
    .journey-path {
      flex: 1;
      height: 4px;
      background: var(--neutral-300);
      margin: 0 0.75rem;
      position: relative;
      z-index: 1;
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    
    .journey-progress {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: var(--success);
      width: 75%;
      border-radius: var(--radius-full);
    }
    
    .journey-icon {
      width: 50px;
      height: 50px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
      margin: 0 auto 0.5rem;
    }
    
    .journey-icon img {
      width: 60%;
      height: auto;
    }
    
    .journey-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--neutral-800);
    }
    
    .journey-status {
      font-size: 0.7rem;
      color: var(--success);
      margin-top: 0.25rem;
    }
    
    .journey-checkpoint {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }
    
    .journey-checkpoint-dot {
      width: 10px;
      height: 10px;
      background: var(--info);
      border-radius: 50%;
      margin: 0 auto;
      position: relative;
    }
    
    .journey-checkpoint-dot::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      width: 30px;
      height: 30px;
      background: rgba(0, 149, 255, 0.1);
      border-radius: 50%;
      z-index: -1;
    }
    
    .journey-checkpoint-label {
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.7rem;
      color: var(--info);
      white-space: nowrap;
      background: white;
      padding: 0.2rem 0.5rem;
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow-sm);
    }
    
    .journey-money {
      position: absolute;
      top: 50%;
      left: 38%;
      transform: translate(-50%, -50%);
      animation: moveRight 3s ease-in-out infinite;
      z-index: 3;
    }
    
    .journey-money-icon {
      font-size: 1.2rem;
      color: var(--accent);
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }
    
    @keyframes moveRight {
      0% { left: 38%; }
      50% { left: 42%; }
      100% { left: 38%; }
    }
    
    /* Ajustes Responsivos */
    @media (min-width: 768px) {
      .withdrawal-container {
        padding: 1.5rem;
        padding-top: 80px;
        padding-bottom: 80px;
      }
      
      .timeline {
        margin-bottom: 3rem;
      }
      
      .timeline-icon {
        width: 3rem;
        height: 3rem;
        font-size: 1.25rem;
        margin-bottom: 0.75rem;
      }
      
      .timeline-label {
        font-size: 0.8rem;
        max-width: 100px;
      }
      
      .method-options {
        gap: 1.5rem;
      }
      
      .method-option {
        padding: 1.25rem;
      }
      
      .method-icon {
        font-size: 1.75rem;
      }
      
      .method-label {
        font-size: 0.9rem;
      }
      
      .method-description {
        font-size: 0.75rem;
      }
      
      .bank-logo-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    @media (max-width: 576px) {
      .section-title {
        font-size: 0.9rem;
      }
      
      .method-options {
        flex-direction: column;
      }
      
      .method-option {
        width: 100%;
      }
      
      .verify-banner {
        flex-direction: column;
        text-align: center;
        padding: 1rem;
      }
      
      .verify-icon {
        margin: 0 auto 0.5rem;
      }
      
      .verify-action {
        width: 100%;
        margin-top: 0.5rem;
      }
      
      .verification-actions {
        flex-direction: column;
      }
      
      .receipt-card {
        padding: 1rem;
      }
      
      .users-online-badge {
        display: none;
      }
      
      .withdrawal-container {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
      
      .bank-detail-row {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .bank-detail-value {
        margin-top: 0.25rem;
        width: 100%;
        justify-content: space-between;
      }
      
      .tabs-header {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 0.5rem;
      }
      
      .tab-item {
        padding: 0.75rem 0.5rem;
        font-size: 0.8rem;
      }
      
      .confirmation-actions {
        flex-direction: column;
      }
    }
    
    /* Soporte de imagen de fondo */
    .bg-image {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-size: cover;
      background-position: center;
      opacity: 0.02;
      pointer-events: none;
      z-index: -1;
    }

    /* Nuevos botones de acción social */
    .social-action-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    
    .social-action-button {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 1rem;
      background: white;
      border: 1px solid var(--neutral-300);
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-800);
      text-decoration: none;
      transition: all 0.3s var(--animation-bounce);
      white-space: nowrap;
      box-shadow: var(--shadow-sm);
      flex: 1;
      justify-content: center;
    }
    
    .social-action-button:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
      background: var(--neutral-100);
      border-color: var(--primary);
      color: var(--primary);
    }
    
    .social-action-button i {
      font-size: 0.9rem;
      color: var(--primary);
    }
    
    /* Estilos para la navegación inferior mejorada */
    .bottom-nav {
      padding: 0.5rem 0.25rem;
    }
    
    .bottom-nav .nav-item {
      position: relative;
      padding: 0.5rem 0.25rem;
    }
    
    .bottom-nav .nav-icon {
      margin-bottom: 0.25rem;
      font-size: 1.2rem;
    }
    
    .bottom-nav .nav-label {
      font-size: 0.65rem;
    }
    
    /* Badge para notificaciones en nav */
    .nav-badge {
      position: absolute;
      top: 6px;
      right: calc(50% - 16px);
      background: var(--danger);
      color: white;
      font-size: 0.6rem;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }
    
    /* Soporte de idioma */
    .language-selector {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.35rem 0.5rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      font-size: 0.7rem;
      color: var(--neutral-700);
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .language-selector:hover {
      background: var(--neutral-300);
    }
    
    .language-selector i {
      font-size: 0.8rem;
    }
  </style>
</head>

<body>
  <!-- Fondo de soporte -->
  <div class="bg-image"></div>
  
  <!-- App Header -->
  <header class="app-header">
    <a href="recarga.html" class="back-btn"><i class="fas fa-arrow-left"></i></a>
    <div class="header-brand">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX">
    </div>
    
    <div class="header-actions">
      <div class="users-online-badge">
        <div class="pulse-dot"></div>
        <span id="users-online-count">124 usuarios conectados</span>
      </div>
      
      <button class="header-action-btn" id="notification-btn" aria-label="Notificaciones">
        <i class="fas fa-bell"></i>
        <span class="notification-badge">2</span>
      </button>
    </div>
  </header>

  <!-- Contenedor Principal -->
  <div class="withdrawal-container">
    <div class="section-title" style="margin-bottom: 1.5rem; display: flex; align-items: center;">
      <a href="recarga.html" style="color: var(--primary); text-decoration: none; display: flex; align-items: center;">
        <i class="fas fa-arrow-left" style="margin-right: 1rem;"></i>
      </a>
      <span>Retiro de Fondos</span>
    </div>
    
    <!-- Badge de Seguridad -->
    <div class="security-badge">
      <div class="security-badge-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <div class="security-badge-content">
        <div class="security-badge-title">Transferencia Segura</div>
        <div class="security-badge-text">Todas tus transacciones están protegidas con certificados de seguridad</div>
      </div>
    </div>

    <!-- Tabs de Navegación -->
    <div class="tabs-container">
      <div class="tabs-header">
        <div class="tab-item active" data-tab="new-withdrawal">Crear Retiro</div>
        <div class="tab-item" data-tab="pending">Operaciones Pendientes</div>
        <div class="tab-item" data-tab="history">Historial</div>
      </div>
      
      <!-- Tab 1: Crear Nuevo Retiro -->
      <div class="tab-content active" id="new-withdrawal-tab">
        <!-- Timeline del Proceso de Retiro -->
        <div class="timeline-container">
          <div class="timeline">
            <div class="timeline-progress" id="timeline-progress" style="width: 25%;"></div>
            
            <div class="timeline-step active" id="step-create">
              <div class="timeline-icon">
                <i class="fas fa-edit"></i>
              </div>
              <div class="timeline-label">Crear Orden</div>
            </div>
            
            <div class="timeline-step" id="step-verify">
              <div class="timeline-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="timeline-label">Verificar Cuenta</div>
            </div>
            
            <div class="timeline-step" id="step-process">
              <div class="timeline-icon">
                <i class="fas fa-cog"></i>
              </div>
              <div class="timeline-label">Procesando</div>
            </div>
            
            <div class="timeline-step" id="step-complete">
              <div class="timeline-icon">
                <i class="fas fa-check"></i>
              </div>
              <div class="timeline-label">Completado</div>
            </div>
          </div>
        </div>

        <!-- Tarjetas de Saldo -->
        <div class="card">
          <div class="section-title" style="margin-bottom: 0.5rem;">
            <i class="fas fa-wallet"></i> Saldo Disponible
            <span class="info-badge" id="info-balance-badge" title="Información sobre tu saldo"><i class="fas fa-info"></i></span>
          </div>
          
          <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1rem;">
            <div style="flex: 1; min-width: 200px; background: var(--primary); color: white; padding: 1rem; border-radius: var(--radius-md); position: relative; overflow: hidden;">
              <div style="position: absolute; right: -20px; bottom: -20px; width: 100px; height: 100px; border-radius: 50%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);"></div>
              
              <div style="position: relative; z-index: 2;">
                <div style="font-size: 0.8rem; opacity: 0.8; margin-bottom: 0.5rem;">Saldo Total</div>
                <div style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0.5rem;" id="total-balance">Bs 0,00</div>
                <div style="font-size: 0.8rem; opacity: 0.8;" id="balance-equivalents">≈ $0.00 | ≈ €0.00</div>
              </div>
            </div>
            
            <div style="flex: 1; min-width: 200px; background: var(--neutral-200); padding: 1rem; border-radius: var(--radius-md);">
              <div style="font-size: 0.8rem; color: var(--neutral-600); margin-bottom: 0.5rem;">Cantidad a Retirar</div>
              <div style="position: relative;">
                <input type="text" class="form-control" id="withdrawal-amount" placeholder="0,00" inputmode="decimal" style="padding-left: 2.5rem; font-size: 1.25rem; font-weight: 600;">
                <div style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-weight: 600; color: var(--neutral-800);">Bs</div>
              </div>
              <div style="font-size: 0.75rem; color: var(--neutral-500); margin-top: 0.5rem; text-align: right;" id="amount-equivalents">≈ $0.00 | ≈ €0.00</div>
            </div>
          </div>
          
          <div style="font-size: 0.75rem; color: var(--neutral-600); margin-bottom: 1rem; text-align: center;">
            Tasa: <span id="exchange-rate-display">1 USD = 114,45 Bs | 1 USD = 0,94 EUR</span>
          </div>
        </div>
        
        <!-- Visualización del Progreso de los Fondos -->
        <div class="funds-journey">
          <div class="journey-visualization">
            <div class="journey-from">
              <div class="journey-icon">
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX VISA">
              </div>
              <div class="journey-label">REMEEX VISA</div>
              <div class="journey-status">Listo para enviar</div>
            </div><div class="journey-path">
              <div class="journey-progress" id="journey-progress-bar"></div>
              <div class="journey-checkpoint">
                <div class="journey-checkpoint-dot"></div>
                <div class="journey-checkpoint-label">Verificación</div>
              </div>
              <div class="journey-money" id="journey-money-animation">
                <div class="journey-money-icon">
                  <i class="fas fa-dollar-sign"></i>
                </div>
              </div>
            </div>
            
            <div class="journey-to">
              <div class="journey-icon" id="destination-bank-icon">
                <!-- El logo del banco seleccionado se cargará dinámicamente aquí -->
                <img src="https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png" alt="Tu Banco" id="destination-bank-logo">
              </div>
              <div class="journey-label" id="destination-bank-name">Tu Banco</div>
              <div class="journey-status">Esperando fondos</div>
            </div>
          </div>
        </div>

        <!-- Selección de Método de Retiro -->
        <div class="card">
          <div class="section-title" style="margin-bottom: 0.75rem;">
            <i class="fas fa-exchange-alt"></i> Método de Retiro
          </div>
          
          <div class="method-options">
            <div class="method-option active" data-method="mobile" data-limit="250000">
              <div class="method-icon">
                <i class="fas fa-mobile-alt"></i>
              </div>
              <div class="method-label">Pago Móvil</div>
              <div class="method-description">Límite: 250.000,00 Bs</div>
            </div>
            
            <div class="method-option" data-method="bank" data-limit="1000000">
              <div class="method-icon">
                <i class="fas fa-university"></i>
              </div>
              <div class="method-label">Transferencia Bancaria</div>
              <div class="method-description">Límite: 1.000.000,00 Bs</div>
            </div>
            
            <div class="method-option" data-method="international">
              <div class="method-icon">
                <i class="fas fa-globe"></i>
              </div>
              <div class="method-label">Transferencia Internacional</div>
              <div class="method-description">Sin límite</div>
            </div>
          </div>
          
          <!-- Formulario de Pago Móvil -->
          <div class="bank-selection active" id="mobile-payment-form">
            <div class="form-group">
              <label class="form-label">Banco Emisor <i class="fas fa-info-circle" style="color: var(--info); font-size: 0.75rem; cursor: pointer;" title="Selecciona el banco asociado a tu número de teléfono"></i></label>
              <p class="help-text">Selecciona el banco donde tienes registrado tu número de pago móvil</p>
              
              <!-- Grilla de Logos de Bancos -->
              <div class="bank-logo-grid" id="mobile-bank-grid">
                <!-- Los logos de bancos se cargarán dinámicamente por JavaScript -->
              </div>
              
              <input type="hidden" id="mobile-bank" name="mobile-bank" value="">
            </div>
            
            <div class="form-group">
              <label class="form-label" for="mobile-number">Número de Teléfono</label>
              <input type="tel" class="form-control" id="mobile-number" placeholder="Ejemplo: 0414-1234567">
              <div class="error-message" id="mobile-number-error">Por favor, introduce un número de teléfono válido.</div>
              <div class="help-text">Introduce el número registrado en tu banco para pago móvil</div>
            </div>
            
            <div class="form-group">
              <label class="form-label" for="mobile-id">Cédula de Identidad</label>
              <input type="text" class="form-control" id="mobile-id" placeholder="Ejemplo: V-12345678">
              <div class="error-message" id="mobile-id-error">Por favor, introduce un número de cédula válido.</div>
              <div class="help-text">Debe ser tu propia cédula, igual a la registrada en el banco</div>
            </div>
            
            <div class="form-group">
              <label class="form-label" for="mobile-name">Nombre Completo</label>
              <input type="text" class="form-control" id="mobile-name" placeholder="Tal como aparece en tu banco">
              <div class="error-message" id="mobile-name-error">Por favor, introduce tu nombre completo.</div>
              <div class="help-text">Nombres y apellidos exactamente como aparecen en tu banco</div>
            </div>
          </div>
          
          <!-- Formulario de Transferencia Bancaria -->
          <div class="bank-selection" id="bank-transfer-form">
            <div class="form-group">
              <label class="form-label">Banco <i class="fas fa-info-circle" style="color: var(--info); font-size: 0.75rem; cursor: pointer;" title="Selecciona el banco donde tienes tu cuenta"></i></label>
              <p class="help-text">Selecciona el banco donde tienes tu cuenta bancaria</p>
              
              <!-- Grilla de Logos de Bancos -->
              <div class="bank-logo-grid" id="bank-name-grid">
                <!-- Los logos de bancos se cargarán dinámicamente por JavaScript -->
              </div>
              
              <input type="hidden" id="bank-name" name="bank-name" value="">
            </div>
            
            <div class="form-group">
              <label class="form-label" for="account-type">Tipo de Cuenta</label>
              <select class="form-control" id="account-type">
                <option value="" disabled selected>Seleccione el tipo de cuenta</option>
                <option value="corriente">Corriente</option>
                <option value="ahorro">Ahorro</option>
              </select>
              <div class="help-text">Selecciona el tipo de cuenta bancaria que tienes</div>
            </div>
            
            <div class="form-group">
              <label class="form-label" for="account-number">Número de Cuenta</label>
              <input type="text" class="form-control" id="account-number" placeholder="Ejemplo: 0105-0000-00-0000000000">
              <div class="error-message" id="account-number-error">Por favor, introduce un número de cuenta válido.</div>
              <div class="help-text">Ingresa tu número de cuenta completo (20 dígitos)</div>
            </div>
            
            <div class="form-group">
              <label class="form-label" for="account-id">Cédula de Identidad</label>
              <input type="text" class="form-control" id="account-id" placeholder="Ejemplo: V-12345678">
              <div class="error-message" id="account-id-error">Por favor, introduce un número de cédula válido.</div>
              <div class="help-text">Debe ser tu propia cédula, igual a la registrada en el banco</div>
            </div>
            
            <div class="form-group">
              <label class="form-label" for="account-name">Nombre Completo</label>
              <input type="text" class="form-control" id="account-name" placeholder="Tal como aparece en tu banco">
              <div class="error-message" id="account-name-error">Por favor, introduce tu nombre completo.</div>
              <div class="help-text">Nombres y apellidos exactamente como aparecen en tu banco</div>
            </div>
          </div>
          
          <!-- Formulario de Transferencia Internacional -->
          <div class="bank-selection" id="international-transfer-form">
            <div class="form-group">
              <label class="form-label" for="int-method">Método de Envío Internacional</label>
              <select class="form-control" id="int-method">
                <option value="" disabled selected>Seleccione el método</option>
                <option value="zelle">Zelle</option>
                <option value="paypal">PayPal</option>
                <option value="wise">Wise (Transferwise)</option>
                <option value="swift">Transferencia SWIFT</option>
                <option value="crypto">Criptomonedas</option>
              </select>
              <div class="help-text">Selecciona el método que prefieres para recibir tus fondos</div>
            </div>
            
            <!-- Formularios específicos por método internacional -->
            <!-- Zelle -->
            <div class="form-group" id="zelle-form" style="display: none;">
              <label class="form-label" for="zelle-email">Correo Electrónico de Zelle</label>
              <input type="email" class="form-control" id="zelle-email" placeholder="correo@ejemplo.com">
              <div class="error-message" id="zelle-email-error">Por favor, introduce un correo electrónico válido.</div>
              <div class="help-text">El correo debe estar asociado a tu cuenta de Zelle</div>
            </div>
            
            <!-- PayPal -->
            <div class="form-group" id="paypal-form" style="display: none;">
              <label class="form-label" for="paypal-email">Correo Electrónico de PayPal</label>
              <input type="email" class="form-control" id="paypal-email" placeholder="correo@ejemplo.com">
              <div class="error-message" id="paypal-email-error">Por favor, introduce un correo electrónico válido.</div>
              <div class="help-text">El correo debe estar asociado a tu cuenta de PayPal</div>
            </div>
            
            <!-- SWIFT -->
            <div id="swift-form" style="display: none;">
              <div class="form-group">
                <label class="form-label" for="swift-bank">Nombre del Banco</label>
                <input type="text" class="form-control" id="swift-bank" placeholder="Nombre del banco">
                <div class="help-text">Nombre completo del banco receptor</div>
              </div>
              
              <div class="form-group">
                <label class="form-label" for="swift-code">Código SWIFT/BIC</label>
                <input type="text" class="form-control" id="swift-code" placeholder="Ejemplo: BOFAUS3N">
                <div class="help-text">Código internacional de tu banco (8 o 11 caracteres)</div>
              </div>
              
              <div class="form-group">
                <label class="form-label" for="swift-account">Número de Cuenta/IBAN</label>
                <input type="text" class="form-control" id="swift-account" placeholder="Número de cuenta o IBAN">
                <div class="help-text">Número de cuenta internacional o IBAN completo</div>
              </div>
              
              <div class="form-group">
                <label class="form-label" for="swift-name">Nombre del Beneficiario</label>
                <input type="text" class="form-control" id="swift-name" placeholder="Nombre completo">
                <div class="help-text">Tu nombre completo tal como aparece en el banco</div>
              </div>
              
              <div class="form-group">
                <label class="form-label" for="swift-address">Dirección del Beneficiario</label>
                <input type="text" class="form-control" id="swift-address" placeholder="Dirección completa">
                <div class="help-text">Tu dirección tal como está registrada en el banco</div>
              </div>
            </div>
            
            <!-- Crypto -->
            <div class="form-group" id="crypto-form" style="display: none;">
              <label class="form-label" for="crypto-currency">Seleccione Criptomoneda</label>
              <select class="form-control" id="crypto-currency">
                <option value="btc">Bitcoin (BTC)</option>
                <option value="eth">Ethereum (ETH)</option>
                <option value="usdt">Tether (USDT)</option>
                <option value="usdc">USD Coin (USDC)</option>
                <option value="bnb">Binance Coin (BNB)</option>
              </select>
              <div class="help-text">Selecciona la criptomoneda que deseas recibir</div>
              
              <label class="form-label" for="crypto-address" style="margin-top: 1rem;">Dirección de Billetera</label>
              <input type="text" class="form-control" id="crypto-address" placeholder="Dirección de tu billetera">
              <div class="error-message" id="crypto-address-error">Por favor, introduce una dirección de billetera válida.</div>
              <div class="help-text">Verifica que la dirección sea correcta antes de continuar</div>
            </div>
            
            <!-- Wise -->
            <div class="form-group" id="wise-form" style="display: none;">
              <label class="form-label" for="wise-email">Correo Electrónico de Wise</label>
              <input type="email" class="form-control" id="wise-email" placeholder="correo@ejemplo.com">
              <div class="error-message" id="wise-email-error">Por favor, introduce un correo electrónico válido.</div>
              <div class="help-text">El correo debe estar asociado a tu cuenta de Wise</div>
            </div>
          </div>
          
          <!-- Banner de Verificación Mejorado -->
          <div class="verify-banner" id="verify-banner" style="display: none;">
            <div class="verify-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="verify-content">
              <div class="verify-title">Último paso para desbloquear tus fondos</div>
              <div class="verify-text">Para garantizar la seguridad y que el dinero llegue correctamente, necesitamos confirmar que la cuenta bancaria es realmente tuya.</div>
              
              <div class="verify-benefits">
                <div class="verify-benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>El depósito de verificación se agrega a tu saldo disponible</span>
                </div>
                <div class="verify-benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Proceso único por cuenta bancaria</span>
                </div>
                <div class="verify-benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>+18.945 usuarios ya han completado este paso</span>
                </div>
              </div>
              
              <button class="verify-action" id="verify-now-btn">
                <i class="fas fa-shield-alt"></i> Verificar Ahora
              </button>
            </div>
          </div>

          <!-- Contenedor de Estado de Verificación -->
          <div id="verification-status-container" style="display: none; background: rgba(0, 149, 255, 0.1); border-radius: var(--radius-md); padding: 1rem; margin-top: 1rem; border-left: 4px solid var(--info);">
            <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
              <div style="color: var(--info); font-size: 1.2rem; margin-top: 0.1rem;">
                <i class="fas fa-clock"></i>
              </div>
              <div>
                <h3 style="font-size: 0.9rem; margin-bottom: 0.5rem; font-weight: 600; color: var(--info);">Verificación en Proceso</h3>
                <p style="font-size: 0.8rem; color: var(--neutral-700); margin-bottom: 0.5rem;">Tu depósito de verificación está siendo procesado. Este proceso normalmente toma unos minutos, pero puede demorar hasta 24 horas en algunos casos.</p>
                <div style="display: flex; gap: 0.5rem; margin-top: 0.75rem; flex-wrap: wrap;">
                  <button class="btn btn-outline" id="verification-check-status-btn" style="font-size: 0.75rem; padding: 0 0.75rem; height: 36px;">
                    <i class="fas fa-sync-alt"></i> Verificar Estado
                  </button>
                  <button class="btn btn-outline" id="verification-contact-support-btn" style="font-size: 0.75rem; padding: 0 0.75rem; height: 36px;">
                    <i class="fas fa-headset"></i> Contactar Soporte
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Prueba Social -->
          <div class="social-proof">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
              <h3 style="font-size: 0.9rem; font-weight: 600; color: var(--neutral-800);">Lo que dicen nuestros usuarios</h3>
              <div class="live-indicator">
                <div class="live-dot"></div>
                <span>En tiempo real</span>
              </div>
            </div>
            
            <div class="stats-container">
              <div class="stat-item">
                <div class="stat-value" id="stat-usuarios">18.945</div>
                <div class="stat-label">Usuarios verificados</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="stat-retiros">2.349</div>
                <div class="stat-label">Retiros este mes</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="stat-tiempo">4min</div>
                <div class="stat-label">Tiempo promedio</div>
              </div>
            </div>
            
            <div class="testimonial-container">
              <div class="testimonial-slider" id="testimonial-slider">
                <div class="testimonial">
                  <div class="testimonial-content">
                    Proceso muy rápido y seguro. En menos de 5 minutos completé la verificación y pude retirar sin problemas.
                  </div>
                  <div class="testimonial-author">
                    <div class="testimonial-avatar">MG</div>
                    <div class="testimonial-name">María G.</div>
                    <div class="testimonial-date">Hace 2 días</div>
                  </div>
                </div>
                
                <div class="testimonial">
                  <div class="testimonial-content">
                    Al principio dudaba de hacer el depósito de verificación, pero ahora entiendo que era necesario. El dinero se sumó a mi saldo y todo perfecto.
                  </div>
                  <div class="testimonial-author">
                    <div class="testimonial-avatar">JR</div>
                    <div class="testimonial-name">Juan R.</div>
                    <div class="testimonial-date">Hace 5 días</div>
                  </div>
                </div>
                
                <div class="testimonial">
                  <div class="testimonial-content">
                    Excelente servicio, el soporte me ayudó en todo momento. Muy recomendado para quienes buscan seguridad en sus transferencias.
                  </div>
                  <div class="testimonial-author">
                    <div class="testimonial-avatar">LP</div>
                    <div class="testimonial-name">Laura P.</div>
                    <div class="testimonial-date">Hace 1 semana</div>
                  </div>
                </div>
                
                <!-- Nuevos testimonios añadidos -->
                <div class="testimonial">
                  <div class="testimonial-content">
                    Tenía dudas sobre el proceso, pero el depósito en bolívares fue sumado inmediatamente a mi saldo en dólares. ¡Recomendado!
                  </div>
                  <div class="testimonial-author">
                    <div class="testimonial-avatar">CA</div>
                    <div class="testimonial-name">Carlos A.</div>
                    <div class="testimonial-date">Hace 3 días</div>
                  </div>
                </div>
                
                <div class="testimonial">
                  <div class="testimonial-content">
                    Retiré varios miles de bolívares a mi banco sin ningún problema después de verificar mi cuenta. El soporte técnico respondió todas mis dudas.
                  </div>
                  <div class="testimonial-author">
                    <div class="testimonial-avatar">RV</div>
                    <div class="testimonial-name">Rodrigo V.</div>
                    <div class="testimonial-date">Hace 6 días</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Nuevos botones de acción social -->
            <div class="social-action-buttons">
              <a href="opinionesremeex.html" class="social-action-button">
                <i class="fas fa-star"></i> Ver más opiniones
              </a>
              <a href="fororemeex.html" class="social-action-button">
                <i class="fas fa-comments"></i> Foro en vivo
              </a>
            </div>
          </div>

          <!-- NUEVA Guía de Verificación Destacada -->
          <div class="verification-guide-enhanced" id="verification-guide-enhanced">
            <div class="verification-guide-enhanced-title">
              <i class="fas fa-shield-alt"></i>
              <span>Cómo completar la verificación de tu cuenta</span>
            </div>
            
            <div class="verification-guide-steps">
              <div class="verification-guide-step">
                <div class="verification-guide-step-title">Dirígete al Panel Principal</div>
                <div class="verification-guide-step-description">Presiona el botón <strong>"Recargar Saldo"</strong> en la pantalla principal de tu cuenta REMEEX.</div>
              </div>
              
              <div class="verification-guide-step">
                <div class="verification-guide-step-title">Selecciona Pago Móvil</div>
                <div class="verification-guide-step-description">Utiliza <strong>la misma cuenta bancaria</strong> que registraste para retiros. Esto es esencial para que podamos verificar que la cuenta te pertenece.</div>
              </div>
              
              <div class="verification-guide-step">
                <div class="verification-guide-step-title">Realiza el depósito de verificación</div>
                <div class="verification-guide-step-description">Deposita <span class="verification-amount-highlight">Bs 2.845,50</span> (equivalente a $25 USD) desde tu cuenta personal.</div>
                <div class="verification-guide-step-note">Este monto se agrega automáticamente a tu saldo disponible. No es una comisión.</div>
              </div>
              
              <div class="verification-guide-step">
                <div class="verification-guide-step-title">Verifica tus datos</div>
                <div class="verification-guide-step-description">Asegúrate que el nombre y cédula de identidad sean exactamente los mismos que usaste aquí para registrar tu cuenta bancaria.</div>
              </div>
              
              <div class="verification-guide-step">
                <div class="verification-guide-step-title">¡Completo!</div>
                <div class="verification-guide-step-description">Tu cuenta quedará verificada y el monto depositado se agregará a tu saldo disponible en dólares usando la tasa de cambio vigente.</div>
              </div>
            </div>
            
            <div class="verification-guide-footer">
              <i class="fas fa-info-circle"></i>
              <span>La verificación es un proceso único que protege tus fondos y confirma la titularidad de tu cuenta bancaria.</span>
            </div>
            
            <!-- NUEVO: Checkbox de confirmación de lectura -->
            <div class="checkbox-container" id="verification-checkbox-container">
              <div class="checkbox-wrapper">
                <input type="checkbox" id="verification-confirmation-checkbox" class="verification-checkbox">
                <span class="checkbox-custom"></span>
              </div>
              <label class="checkbox-label" for="verification-confirmation-checkbox">
                He leído y entiendo que debo realizar un depósito de verificación de <strong>Bs 2.845,50</strong> (equivalente a $25 USD) para completar mi retiro. Este monto se sumará a mi saldo disponible.
              </label>
            </div>
          </div>

          <button class="btn btn-primary" id="submit-withdrawal" style="margin-top: 1.5rem;" disabled>
            <i class="fas fa-paper-plane"></i> Solicitar Retiro
          </button>
          
          <!-- Información de Verificación con botón añadido -->
          <div style="margin-top: 1.5rem; padding: 1rem; background-color: rgba(26, 31, 113, 0.05); border-radius: var(--radius-md); display: flex; align-items: flex-start; gap: 0.75rem;">
            <i class="fas fa-info-circle" style="color: var(--primary); font-size: 1.2rem; margin-top: 0.1rem;"></i>
            <div>
              <p style="font-size: 0.85rem; color: var(--neutral-700); margin-bottom: 0.5rem;">Para tu seguridad, todos los retiros se procesan únicamente a cuentas verificadas y que estén a <strong>tu nombre</strong>. No se permiten transferencias a cuentas de terceros.</p>
              <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 0.5rem;">
                <a href="#" class="info-link" id="show-security-info">¿Por qué necesito verificar mi cuenta?</a>
                <a href="dudas.html" class="btn btn-outline" style="font-size: 0.75rem; padding: 0 0.75rem; height: 36px; margin-top: -0.5rem;">
                  <i class="fas fa-question-circle"></i> Más preguntas y respuestas
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tab 2: Operaciones Pendientes -->
      <div class="tab-content" id="pending-tab">
        <div class="pending-transactions" id="pending-transactions-container">
          <div style="text-align: center; margin: 2rem 0; color: var(--neutral-600); display: none;" id="no-pending-message">
            <i class="fas fa-check-circle" style="font-size: 2.5rem; color: var(--neutral-400); margin-bottom: 1rem; display: block;"></i>
            <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">No tienes operaciones pendientes</h3>
            <p style="font-size: 0.85rem;">Todas tus transacciones han sido procesadas</p>
          </div>
          
          <!-- Lista de operaciones pendientes (se populará dinámicamente) -->
          <div id="pending-transactions-list"></div>
        </div>
      </div>
      
      <!-- Tab 3: Historial -->
      <div class="tab-content" id="history-tab">
        <div class="transaction-history" id="transaction-history-container">
          <div style="text-align: center; margin: 2rem 0; color: var(--neutral-600); display: none;" id="no-history-message">
            <i class="fas fa-history" style="font-size: 2.5rem; color: var(--neutral-400); margin-bottom: 1rem; display: block;"></i>
            <h3 style="font-size: 1rem; margin-bottom: 0.5rem;">No tienes operaciones anteriores</h3>
            <p style="font-size: 0.85rem;">Aquí aparecerán tus transacciones completadas</p>
          </div>
          
          <!-- Lista de historial de transacciones (se populará dinámicamente) -->
          <div id="transaction-history-list"></div>
        </div>
      </div>
    </div>

    <!-- Navegación Inferior Rediseñada -->
    <nav class="bottom-nav" id="bottom-nav">
      <a href="recarga.html" class="nav-item" id="nav-home">
        <div class="nav-icon"><i class="fas fa-home"></i></div>
        <div class="nav-label">Inicio</div>
      </a>
      <a href="#" class="nav-item active" id="nav-create-withdrawal">
        <div class="nav-icon"><i class="fas fa-plus-circle"></i></div>
        <div class="nav-label">Crear Retiro</div>
      </a>
      
      <a href="#" class="nav-item" id="nav-pending-operations">
        <div class="nav-icon"><i class="fas fa-clock"></i></div>
        <div class="nav-label">Pendientes</div>
      </a>
      
      <a href="#" class="nav-item" id="nav-history">
        <div class="nav-icon"><i class="fas fa-history"></i></div>
        <div class="nav-label">Historial</div>
      </a>
      
      <a href="fororemeex.html" class="nav-item">
        <div class="nav-icon"><i class="fas fa-comments"></i></div>
        <div class="nav-label">Foro</div>
      </a>

      <a href="#" class="nav-item" id="nav-support">
        <div class="nav-icon"><i class="fas fa-headset"></i></div>
        <div class="nav-label">Soporte</div>
      </a>
    </nav>

    <!-- Soporte y Ayuda (se mostrará cuando se presione el botón de soporte) -->
    <div id="support-container" style="display: none; position: fixed; bottom: 65px; left: 0; right: 0; background: white; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); z-index: 899; padding: 1rem; border-top-left-radius: var(--radius-lg); border-top-right-radius: var(--radius-lg); animation: slideInUp 0.3s ease;">
      <div class="section-title" style="margin-bottom: 1rem; display: flex; align-items: center; justify-content: space-between;">
        <span><i class="fas fa-headset"></i> Soporte y Ayuda</span>
        <button id="close-support" style="background: none; border: none; font-size: 1.2rem; color: var(--neutral-700); cursor: pointer;">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="contact-options">
        <a href="https://wa.me/+17373018059" class="contact-option" target="_blank">
          <div class="contact-icon whatsapp">
            <i class="fab fa-whatsapp"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">WhatsApp</div>
            <div class="contact-description">Atención inmediata las 24 horas</div>
          </div>
        </a>
        
        <a href="mailto:soporte@remeex.com" class="contact-option">
          <div class="contact-icon email">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">Correo Electrónico</div>
            <div class="contact-description">soporte@remeex.com</div>
          </div>
        </a>

        <a href="#" class="contact-option" id="faq-btn">
          <div class="contact-icon reviews">
            <i class="fas fa-question-circle"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">Preguntas Frecuentes</div>
            <div class="contact-description">Resuelve tus dudas rápidamente</div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- Modal de Información de Seguridad -->
  <div class="security-info-container" id="security-info-modal">
    <div class="security-info-content">
      <button class="security-info-close" id="close-security-info">
        <i class="fas fa-times"></i>
      </button>
      <h2 style="font-size: 1.5rem; color: var(--primary); margin-bottom: 1rem; text-align: center;">
        Verificación de Seguridad: Protegiendo Tu Dinero
      </h2>
      
      <p style="margin-bottom: 1rem; line-height: 1.6;">
        Entendemos que la verificación puede generar dudas. Sin embargo, esta medida de seguridad es fundamental para proteger tus fondos y asegurar que solo tú puedas retirar dinero a tu cuenta bancaria.
      </p>
      
      <div class="faq-container">
        <div class="faq-item">
          <div class="faq-header">
            ¿Por qué necesito verificar mi cuenta bancaria?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-content">
            La verificación es la forma más segura de confirmar que la cuenta bancaria a la que quieres enviar tus fondos es realmente tuya. Al hacer un depósito desde tu banco hacia Remeex VISA, nos demuestras que eres tú quien controla esa cuenta. Esto previene que alguien intente desviar tu dinero a una cuenta fraudulenta y es una práctica común en plataformas financieras seguras a nivel internacional.
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-header">
            ¿Perderé el dinero del depósito de verificación?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-content">
            ¡Absolutamente NO! El depósito de verificación NO es una comisión ni un cobro. Es únicamente un depósito que se suma completamente a tu saldo disponible en tu cuenta Remeex VISA en el mismo instante en que lo recibimos. El monto en bolívares se convierte automáticamente a dólares según la tasa de cambio vigente y sigue siendo tu dinero, listo para usarse o retirarse cuando lo desees.
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-header">
            ¿Tendré que hacer este depósito cada vez que quiera retirar dinero?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-content">
            No, el proceso de verificación se realiza UNA SOLA VEZ por cada cuenta bancaria que desees registrar. Una vez que tu cuenta bancaria está verificada, podrás realizar retiros a esa cuenta de manera rápida y sencilla, sin tener que repetir el proceso. Si en el futuro deseas agregar otra cuenta bancaria diferente, deberás verificarla por separado.
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-header">
            ¿Por qué no se permiten transferencias a cuentas de terceros?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-content">
            Por razones de seguridad y para cumplir con las regulaciones bancarias internacionales contra el lavado de dinero (AML) y las políticas de Conozca a su Cliente (KYC), todas las transacciones deben realizarse únicamente entre cuentas que pertenezcan a la misma persona. Esto protege tanto a ti como a nosotros de posibles fraudes, y es un estándar en los servicios financieros globales.
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-header">
            ¿Qué medidas de seguridad utiliza Remeex VISA?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-content">
            Utilizamos múltiples capas de seguridad de nivel bancario, incluyendo encriptación de extremo a extremo, tokenización de datos sensibles, infraestructura segura con monitoreo constante, y cumplimos con todas las normativas internacionales de seguridad de datos financieros (KYC y AML).
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-header">
            ¿Cuánto tiempo tarda en procesarse la verificación?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-content">
            Una vez que realizas el depósito desde tu banco, generalmente se refleja en tu saldo de Remeex VISA casi instantáneamente o en cuestión de pocos minutos. Tan pronto recibimos la confirmación, tu cuenta queda verificada y los fondos aparecen disponibles en tu saldo. En casos muy raros, dependiendo de la conexión entre bancos, podría demorar un poco más.
          </div>
        </div>
      </div>
      
      <div style="margin-top: 1.5rem; text-align: center;">
        <p style="font-size: 0.9rem; font-weight: 600; color: var(--primary); margin-bottom: 1rem;">
          Tu seguridad es nuestra máxima prioridad
        </p>
        <div style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;">
          <button class="btn btn-primary" id="close-security-info-btn" style="max-width: 250px;">
            Entendido
          </button>
          <a href="dudas.html" class="btn btn-outline" style="max-width: 250px;">
            <i class="fas fa-question-circle"></i> Ver más preguntas frecuentes
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Recibo de Retiro -->
  <div class="receipt-overlay" id="receipt-modal">
    <div class="receipt-card">
      <div class="receipt-header">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX" class="receipt-logo">
        <div class="receipt-title">Orden de Retiro Creada</div>
        <div class="receipt-subtitle">Tu solicitud ha sido registrada con éxito</div>
      </div>
      
      <div class="receipt-amount" id="receipt-amount">Bs 0,00</div>
      
      <div class="receipt-details">
        <div class="receipt-detail-row">
          <div class="receipt-detail-label">Número de Orden:</div>
          <div class="receipt-detail-value" id="receipt-order">RET-12345</div>
        </div>
        
        <div class="receipt-detail-row">
          <div class="receipt-detail-label">Fecha:</div>
          <div class="receipt-detail-value" id="receipt-date">7 de Mayo de 2025</div>
        </div>
        
        <div class="receipt-detail-row">
          <div class="receipt-detail-label">Método:</div>
          <div class="receipt-detail-value" id="receipt-method">Pago Móvil</div>
        </div>
        
        <div class="receipt-detail-row">
          <div class="receipt-detail-label">Destino:</div>
          <div class="receipt-detail-value" id="receipt-destination">0424-1234567</div>
        </div>
        
        <div class="receipt-detail-row">
          <div class="receipt-detail-label">Estado:</div>
          <div class="receipt-detail-value">
            <div class="status-badge pending">Pendiente de Verificación</div>
          </div>
        </div>
      </div>
      
      <div style="background: var(--neutral-200); border-radius: var(--radius-md); padding: 0.75rem; margin: 1rem 0; border-left: 3px solid var(--info);">
        <p style="font-size: 0.8rem; color: var(--neutral-700);">
          <i class="fas fa-info-circle" style="color: var(--info);"></i>
          Para completar tu retiro, necesitamos verificar que la cuenta bancaria te pertenece.
        </p>
      </div>
      
      <div class="receipt-actions">
        <button class="btn btn-primary" id="verify-from-receipt">
          <i class="fas fa-shield-alt"></i> Verificar Ahora
        </button>
        
        <button class="btn btn-outline" id="close-receipt">
          <i class="fas fa-times"></i> Cerrar
        </button>
      </div>
      
      <div class="receipt-share" style="margin-top: 1.5rem;">
        <a href="#" class="receipt-share-btn" id="share-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="#" class="receipt-share-btn" id="share-email">
          <i class="fas fa-envelope"></i>
        </a>
        <a href="#" class="receipt-share-btn" id="share-download">
          <i class="fas fa-download"></i>
        </a>
      </div>
    </div>
  </div>

  <!-- NUEVO: Modal de Confirmación de Verificación -->
  <div class="confirmation-modal" id="verification-confirmation-modal">
    <div class="confirmation-card">
      <div class="confirmation-header">
        <div class="confirmation-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="confirmation-title-container">
          <div class="confirmation-title">Un paso más</div>
          <div class="confirmation-subtitle">Verificación de cuenta necesaria</div>
        </div>
      </div>
      
      <div class="confirmation-content">
        <div class="confirmation-message">
          Para poder completar tu solicitud de retiro, necesitamos confirmar que la cuenta bancaria es tuya. Este es un proceso único de seguridad.
        </div>
        
        <div class="confirmation-step">
          <div class="confirmation-step-number">1</div>
          <div class="confirmation-step-text">
            Te dirigiremos a la página de <strong>Recargar Saldo</strong> para realizar un depósito de verificación de <strong>Bs 2.845,50</strong> ($25 USD).
          </div>
        </div>
        
        <div class="confirmation-step">
          <div class="confirmation-step-number">2</div>
          <div class="confirmation-step-text">
            Este depósito se sumará automáticamente a tu saldo disponible.
          </div>
        </div>
        
        <div class="confirmation-step">
          <div class="confirmation-step-number">3</div>
          <div class="confirmation-step-text">
            Al verificar tu cuenta, podrás retirar fondos sin limitaciones en el futuro.
          </div>
        </div>
      </div>
      
      <div class="confirmation-actions">
        <button class="confirmation-btn confirmation-btn-primary" id="confirmation-proceed-btn">
          <i class="fas fa-check-circle"></i> Entiendo, continuar
        </button>
        <button class="confirmation-btn confirmation-btn-secondary" id="confirmation-cancel-btn">
          <i class="fas fa-times-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- NUEVO: Modal de Confirmación de Retiro -->
  <div class="confirmation-modal" id="withdrawal-confirmation-modal">
    <div class="confirmation-card">
      <div class="confirmation-header">
        <div class="confirmation-icon">
          <i class="fas fa-wallet"></i>
        </div>
        <div class="confirmation-title-container">
          <div class="confirmation-title">Confirmar Retiro</div>
          <div class="confirmation-subtitle">Revisa los detalles</div>
        </div>
      </div>

      <div class="confirmation-content">
        <div class="confirmation-message" id="withdrawal-confirmation-message"></div>
      </div>

      <div class="confirmation-actions">
        <button class="confirmation-btn confirmation-btn-primary" id="confirm-withdrawal-btn">
          <i class="fas fa-check-circle"></i> Confirmar
        </button>
        <button class="confirmation-btn confirmation-btn-secondary" id="cancel-withdrawal-btn">
          <i class="fas fa-times-circle"></i> Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="spinner"></div>
    <div class="loading-text" id="loading-text">Procesando tu solicitud...</div>
    <div class="progress-bar-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
  </div>

  <!-- Contenedor de Toast -->
  <div class="toast-container" id="toast-container"></div>
  
  <!-- Tiempo restante antes de redirección por inactividad -->
  <div class="time-remaining" id="time-remaining" style="display: none;">
    <div>Sesión inactiva. Redirigiendo en <span id="redirect-countdown">60</span> segundos</div>
    <div class="time-remaining-progress" id="time-remaining-progress"></div>
  </div>

  <!-- Script -->
  <script>
    // Configuración de valores constantes con tasa de cambio centralizada
    const CONFIG = {
      EXCHANGE_RATES: {
        USD_TO_BS: 121.22,  // Tasa centralizada
        USD_TO_EUR: 0.94
      },
      STORAGE_KEYS: {
        USER_DATA: 'remeexUserData',
        BALANCE: 'remeexBalance',
        TRANSACTIONS: 'remeexTransactions',
        VERIFICATION: 'remeexVerificationStatus',
        TRANSFER_DATA: 'remeexTransferData',
        REFERRER: 'remeexReferrer',
        TRANSACTION_HISTORY: 'remeexTransactionHistory',
        PENDING_TRANSACTIONS: 'remeexPendingTransactions',
        VERIFICATION_CONFIRMATION: 'remeexVerificationConfirmed', // NUEVO: guarda si el usuario confirmó la verificación
        HISTORY_INITIALIZED: 'remeexHistoryInitialized'
      },
      LIMITS: {
        MOBILE: 250000, // 250,000 Bs
        BANK: 1000000 // 1,000,000 Bs
      },
      BANKS: {
        NACIONAL: [
          { id: 'banco-venezuela', name: 'Banco de Venezuela', logo: 'https://www.bancodevenezuela.com/wp-content/uploads/2023/03/logonuevo.png' },
          { id: 'banco-venezolano', name: 'Banco Venezolano de Crédito', logo: 'https://www.venezolano.com/images/galeria/108_1.png' },
          { id: 'banco-mercantil', name: 'Banco Mercantil', logo: 'https://files.socialgest.net/mybio/5f529398b36f8_1599247256.png' },
          { id: 'banco-provincial', name: 'Banco Provincial', logo: 'https://upload.wikimedia.org/wikipedia/commons/d/d4/BBVAprovinciallogo.svg' },
          { id: 'banco-bancaribe', name: 'Banco del Caribe (Bancaribe)', logo: 'https://d3olc33sy92l9e.cloudfront.net/wp-content/themes/bancaribe/images/Bancaribe-LogotipoTurquesa.png' },
          { id: 'banco-exterior', name: 'Banco Exterior', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Banco-Exterior-VE-logo.png/183px-Banco-Exterior-VE-logo.png' },
          { id: 'banco-caroni', name: 'Banco Caroní', logo: 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png' },
          { id: 'banco-banesco', name: 'Banesco', logo: 'https://banesco-prod-2020.s3.amazonaws.com/wp-content/themes/banescocontigo/assets/images/header/logo.svg.gzip' },
          { id: 'banco-sofitasa', name: 'Banco Sofitasa', logo: 'https://www.sofitasa.com/assets/img/nuevo_logo.png' },
          { id: 'banco-plaza', name: 'Banco Plaza', logo: 'https://plazacdn.s3.amazonaws.com/wp-content/themes/bancoplaza/imagenes/logobancoplaza-2.png' },
          { id: 'banco-bancofc', name: 'Banco Fondo Común', logo: 'https://www.bfc.com.ve/wp-content/uploads/2021/01/logofos.png' },
          { id: 'banco-100banco', name: '100% Banco', logo: 'https://www.100x100banco.com/img/logo.png' },
          { id: 'banco-tesoro', name: 'Banco del Tesoro', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Logo_Banco_del_Tesoro.jpg/320px-Logo_Banco_del_Tesoro.jpg' },
          { id: 'banco-bancrecer', name: 'Bancrecer', logo: 'https://www.bancrecer.com.ve/images/img/bancrecer-logo.png' },
          { id: 'banco-activo', name: 'Banco Activo', logo: 'https://www.bancoactivo.com/logo.svg' },
          { id: 'banco-bancamiga', name: 'Bancamiga', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Bancamiga.png/320px-Bancamiga.png' },
          { id: 'banco-bicentenario', name: 'Banco Bicentenario', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/BancoDigitaldelosTrabajadores.png/320px-BancoDigitaldelosTrabajadores.png' },
          { id: 'banco-bnc', name: 'Banco Nacional de Crédito', logo: 'https://www.bncenlinea.com/images/default-source/misc/BNCLogo_rebrand.png' },
          { id: 'banco-bcv', name: 'Banco Central de Venezuela', logo: 'https://www.bcv.org.ve/sites/default/files/default_images/logo_bcv-04_2.png' }
        ],
        INTERNACIONAL: [
          { id: 'bank-america', name: 'Bank of America', logo: 'https://1000logos.net/wp-content/uploads/2016/10/Bank-of-America-Logo.png' },
          { id: 'chase-bank', name: 'Chase Bank', logo: 'https://download.logo.wine/logo/Chase_Bank/Chase_Bank-Logo.wine.png' },
          { id: 'bancolombia', name: 'Bancolombia', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Logo_Bancolombia.svg/2000px-Logo_Bancolombia.svg.png' },
          { id: 'western-union', name: 'Western Union', logo: 'https://logos-world.net/wp-content/uploads/2023/03/Western-Union-Logo.png' }
        ],
        FINTECH: [
          { id: 'zinli', name: 'Zinli', logo: 'https://images.seeklogo.com/logo-png/41/1/zinli-logo-png_seeklogo-411354.png' },
          { id: 'paypal', name: 'PayPal', logo: 'https://upload.wikimedia.org/wikipedia/commons/a/a4/Paypal_2014_logo.png' },
          { id: 'binance', name: 'Binance', logo: 'https://www.logo.wine/a/logo/Binance/Binance-Logo.wine.svg' },
          { id: 'airtm', name: 'AirTM', logo: 'https://brandlogovector.com/wp-content/uploads/2023/08/Airtm-Logo-PNG.png' },
          { id: 'zoom', name: 'Zoom', logo: 'https://zoom.red/wp-content/uploads/2021/01/Logo-Zoom-Registrado.png' },
          { id: 'zelle', name: 'Zelle', logo: 'https://download.logo.wine/logo/Zelle_(payment_service)/Zelle_(payment_service)-Logo.wine.png' },
          { id: 'venmo', name: 'Venmo', logo: 'https://logos-world.net/wp-content/uploads/2021/12/Venmo-Logo.png' },
          { id: 'nequi', name: 'Nequi', logo: 'https://images.seeklogo.com/logo-png/40/1/nequi-logo-png_seeklogo-404357.png' },
          { id: 'wise', name: 'Wise', logo: 'https://icon2.cleanpng.com/lnd/20250116/qj/27d09a29b3056c595b6e2d995a15b5.webp' },
          { id: 'revolut', name: 'Revolut', logo: 'https://e7.pngegg.com/pngimages/739/64/png-clipart-revolut-black-new-logo-tech-companies.png' },
          { id: 'eldorado', name: 'El Dorado', logo: 'https://eldorado.io/static/f4ed8a521b10baed657858830cac133c/58556/logo.webp' },
          { id: 'ubii', name: 'Ubii Pagos', logo: 'https://www.ubiipagos.com/img/new-home/ubiipagos_logo_home_dark.svg' }
        ]
      },
      INACTIVITY_TIMEOUT: 120, // 2 minutos de inactividad antes de redirección
      VERIFICATION_CODE: Math.floor(10000 + Math.random() * 90000), // Código de verificación aleatorio
      VERIFICATION_AMOUNT_USD: 25, // Monto de verificación en USD
      get VERIFICATION_AMOUNT_BS() {
        // Calcula el monto de verificación en Bs basado en la tasa de cambio actualizada
        return (this.VERIFICATION_AMOUNT_USD * this.EXCHANGE_RATES.USD_TO_BS).toFixed(2);
      }
    };

    // Variables globales
    let currentUser = {
      name: '',
      fullName: '',
      email: '',
      balance: {
        usd: 0,
        bs: 0,
        eur: 0
      },
      isVerified: false
    };

    let selectedMethod = 'mobile';
    let activeUsersCount = 0;
    let withdrawalAmount = 0;
    let withdrawalAmountUsd = 0;
    let withdrawalAmountEur = 0;
    let userLastActivity = Date.now();
    let inactivityTimer = null;
    let inactivityCountdown = CONFIG.INACTIVITY_TIMEOUT;
    let verificationInProgress = false;
    let selectedBank = {
      mobile: null,
      bank: null
    };
    
    // NUEVO: Verificar si el usuario ha leído y aceptado la verificación
    let userHasConfirmedVerification = false;
    
    // Datos de transacciones para almacenar historial
    let transactionHistory = [];
    let pendingTransactions = [];
    let testimonialIndex = 0;
    let testimonialInterval = null;
    
    // DOM Ready
    document.addEventListener('DOMContentLoaded', function() {
      // Iniciar aplicación
      initApp();
      
      // Configurar event listeners
      setupEventListeners();
      
      // Cargar datos del usuario
      loadUserDataFromSession();
      
      // Llenar grillas de logos de bancos
      populateBankLogos();
      
      // Configurar timer de inactividad
      setupInactivityTimer();
      
      // Cargar historial de transacciones
      loadTransactionHistory();
      
      // Iniciar slider de testimonios
      startTestimonialSlider();
      
      // Actualizar estadísticas en tiempo real
      startLiveStatsUpdates();
      
      // Inicializar visualización de flujo de fondos
      updateFundsJourney();
      
      // Actualizar monto de verificación en la guía
      updateVerificationAmountInGuide();
      
      // NUEVO: Configurar checkbox de verificación
      setupVerificationCheckbox();
      
      // NUEVO: Hacer scroll automáticamente a la guía de verificación
      setTimeout(function() {
        const verificationGuide = document.getElementById('verification-guide-enhanced');
        if (verificationGuide && !userHasConfirmedVerification) {
          verificationGuide.scrollIntoView({ behavior: 'smooth', block: 'center' });
          // Resaltar el elemento con un destello
          highlightElement(verificationGuide);
        }
      }, 500);
      
      // Configurar la navegación inferior rediseñada
      setupBottomNav();
    });
    
    // Configurar la navegación inferior rediseñada
    function setupBottomNav() {
      // Manejar clic en navegación inferior
      document.getElementById('nav-create-withdrawal').addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelector('.tab-item[data-tab="new-withdrawal"]').click();
        updateActiveNavItem('nav-create-withdrawal');
      });

      document.getElementById('nav-home').addEventListener('click', function(e) {
        e.preventDefault();
        window.location.href = 'recarga.html';
      });
      
      document.getElementById('nav-pending-operations').addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelector('.tab-item[data-tab="pending"]').click();
        updateActiveNavItem('nav-pending-operations');
      });
      
      document.getElementById('nav-history').addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelector('.tab-item[data-tab="history"]').click();
        updateActiveNavItem('nav-history');
      });
      
      document.getElementById('nav-support').addEventListener('click', function(e) {
        e.preventDefault();
        toggleSupportContainer();
        updateActiveNavItem('nav-support');
      });
      
      // Cerrar panel de soporte
      document.getElementById('close-support').addEventListener('click', function() {
        document.getElementById('support-container').style.display = 'none';
        updateActiveNavItem('nav-create-withdrawal');
      });
      
      // Sincronizar tabs con navegación
      document.querySelectorAll('.tab-item').forEach(tab => {
        tab.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          if (tabId === 'new-withdrawal') {
            updateActiveNavItem('nav-create-withdrawal');
          } else if (tabId === 'pending') {
            updateActiveNavItem('nav-pending-operations');
          } else if (tabId === 'history') {
            updateActiveNavItem('nav-history');
          }
        });
      });
    }
    
    // Alternar panel de soporte
    function toggleSupportContainer() {
      const supportContainer = document.getElementById('support-container');
      if (supportContainer.style.display === 'block') {
        supportContainer.style.display = 'none';
      } else {
        supportContainer.style.display = 'block';
      }
    }
    
    // Actualizar ítem activo en navegación
    function updateActiveNavItem(activeId) {
      document.querySelectorAll('.bottom-nav .nav-item').forEach(item => {
        item.classList.remove('active');
      });
      document.getElementById(activeId).classList.add('active');
    }
    
    // NUEVO: Resaltar un elemento con un efecto de destello
    function highlightElement(element) {
      // Guardar el color de fondo original
      const originalBackground = element.style.background;
      
      // Crear una animación de destello
      element.style.transition = 'background 1s ease';
      element.style.background = 'rgba(26, 31, 113, 0.2)';
      
      // Restaurar el color original después de un tiempo
      setTimeout(function() {
        element.style.background = originalBackground;
      }, 1000);
    }
    
    // NUEVO: Configurar checkbox de verificación
    function setupVerificationCheckbox() {
      const checkbox = document.getElementById('verification-confirmation-checkbox');
      const submitBtn = document.getElementById('submit-withdrawal');
      const checkboxContainer = document.getElementById('verification-checkbox-container');
      
      if (checkbox && submitBtn) {
        // Verificar si el usuario ya ha confirmado previamente
        try {
          userHasConfirmedVerification = sessionStorage.getItem(CONFIG.STORAGE_KEYS.VERIFICATION_CONFIRMATION) === 'true';
          
          if (userHasConfirmedVerification) {
            checkbox.checked = true;
            submitBtn.disabled = false;
            
            if (checkboxContainer) {
              checkboxContainer.classList.add('checked');
            }
          }
        } catch (e) {
          console.error('Error al cargar confirmación de verificación:', e);
        }
        
        // Event listener para el checkbox
        checkbox.addEventListener('change', function() {
          submitBtn.disabled = !this.checked;
          
          // Actualizar estado de checkbox container
          if (checkboxContainer) {
            if (this.checked) {
              checkboxContainer.classList.add('checked');
            } else {
              checkboxContainer.classList.remove('checked');
            }
          }
          
          // Guardar preferencia del usuario
          try {
            userHasConfirmedVerification = this.checked;
            sessionStorage.setItem(CONFIG.STORAGE_KEYS.VERIFICATION_CONFIRMATION, this.checked);
          } catch (e) {
            console.error('Error al guardar confirmación de verificación:', e);
          }
          
          // Mostrar un toast al marcar el checkbox
          if (this.checked) {
            showToast('success', 'Confirmado', 'Has confirmado que entiendes el proceso de verificación');
          }
        });
      }
    }
    
    // Inicialización de la aplicación
    function initApp() {
      // Configurar contadores aleatorios
      updateOnlineUsersCount();
      
      // Generar código de verificación aleatorio
      generateVerificationCode();
      
      // Actualizar fecha en el recibo
      updateReceiptDate();
    }
    
    // Actualizar monto de verificación en la guía
    function updateVerificationAmountInGuide() {
      // Formatear monto en Bs para mostrar en la guía
      const verificationAmountBs = formatNumberWithCommas(CONFIG.VERIFICATION_AMOUNT_BS);
      
      // Actualizar todos los montos de verificación en la página
      const verificationAmountElements = document.querySelectorAll('.verification-amount-highlight');
      verificationAmountElements.forEach(element => {
        element.textContent = `Bs ${verificationAmountBs}`;
      });
      
      // Actualizar el texto del checkbox de confirmación
      const checkboxLabel = document.querySelector('.checkbox-label');
      if (checkboxLabel) {
        checkboxLabel.innerHTML = `He leído y entiendo que debo realizar un depósito de verificación de <strong>Bs ${verificationAmountBs}</strong> (equivalente a $${CONFIG.VERIFICATION_AMOUNT_USD} USD) para completar mi retiro. Este monto se sumará a mi saldo disponible.`;
      }
      
      // Actualizar texto en el modal de confirmación
      const confirmationStepText = document.querySelector('.confirmation-step-text strong:last-child');
      if (confirmationStepText) {
        confirmationStepText.textContent = `Bs ${verificationAmountBs}`;
      }
    }
    
    // Iniciar slider de testimonios
    function startTestimonialSlider() {
      testimonialInterval = setInterval(function() {
        const slider = document.getElementById('testimonial-slider');
        if (!slider) return;
        
        const testimonials = slider.querySelectorAll('.testimonial');
        if (!testimonials.length) return;
        
        testimonialIndex = (testimonialIndex + 1) % testimonials.length;
        slider.style.transform = `translateX(-${testimonialIndex * 100}%)`;
      }, 5000);
    }
    
    // Actualizar estadísticas en tiempo real
    function startLiveStatsUpdates() {
      setInterval(function() {
        // Aumentar aleatoriamente el número de usuarios verificados
        const usuariosElement = document.getElementById('stat-usuarios');
        if (usuariosElement) {
          const currentUsuarios = parseInt(usuariosElement.textContent.replace(/\./g, ''));
          const newUsuarios = currentUsuarios + Math.floor(Math.random() * 3);
          usuariosElement.textContent = formatThousands(newUsuarios);
        }
        
        // Aumentar aleatoriamente el número de retiros
        const retirosElement = document.getElementById('stat-retiros');
        if (retirosElement) {
          const currentRetiros = parseInt(retirosElement.textContent.replace(/\./g, ''));
          const newRetiros = currentRetiros + Math.floor(Math.random() * 2);
          retirosElement.textContent = formatThousands(newRetiros);
        }
      }, 20000);
    }
    
    // Formatear números con separadores de miles
    function formatThousands(number) {
      return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }
    
    // Cargar historial de transacciones
    function loadTransactionHistory() {
      try {
        // Cargar historial de sessionStorage
        const historyJson = sessionStorage.getItem(CONFIG.STORAGE_KEYS.TRANSACTION_HISTORY);
        if (historyJson) {
          transactionHistory = JSON.parse(historyJson);
        } else {
          transactionHistory = [];
        }
        
        // Cargar transacciones pendientes
        const pendingJson = sessionStorage.getItem(CONFIG.STORAGE_KEYS.PENDING_TRANSACTIONS);
        if (pendingJson) {
          pendingTransactions = JSON.parse(pendingJson);
        } else {
          pendingTransactions = [];
        }
        
        // Actualizar UI con los datos cargados
        updateTransactionHistoryUI();
        updatePendingTransactionsUI();
        
        // Actualizar contador de notificaciones en la navegación inferior
        updateNavBadges();
        
      } catch (e) {
        console.error('Error al cargar historial de transacciones:', e);
      }
    }
    
    // Actualizar badges de notificación en la navegación
    function updateNavBadges() {
      const pendingCount = pendingTransactions.length;
      const navBadge = document.querySelector('.nav-badge');
      
      if (navBadge) {
        if (pendingCount > 0) {
          navBadge.textContent = pendingCount;
          navBadge.style.display = 'flex';
        } else {
          navBadge.style.display = 'none';
        }
      }
    }
    
    // Actualizar UI de historial de transacciones
    function updateTransactionHistoryUI() {
      const historyList = document.getElementById('transaction-history-list');
      const noHistoryMessage = document.getElementById('no-history-message');
      
      if (!historyList) return;
      
      // Limpiar lista actual
      historyList.innerHTML = '';
      
      // Mostrar mensaje si no hay historial
      if (transactionHistory.length === 0) {
        if (noHistoryMessage) noHistoryMessage.style.display = 'block';
        return;
      } else {
        if (noHistoryMessage) noHistoryMessage.style.display = 'none';
      }
      
      // Crear elementos de historial
      transactionHistory.forEach(transaction => {
        const transactionItem = document.createElement('div');
        transactionItem.className = 'transaction-history-item';
        
        // Icono según estado
        const iconClass = transaction.status === 'completed' ? 'fas fa-check' : 'fas fa-times';
        const statusText = transaction.status === 'completed' ? 'Completado' : 'Rechazado';
        const statusClass = transaction.status === 'completed' ? 'verified' : 'rejected';
        
        // Determinar título según método
        let titleText = '';
        if (transaction.method === 'mobile') {
          titleText = 'Retiro a Pago Móvil';
        } else if (transaction.method === 'bank') {
          titleText = `Retiro a ${transaction.bankName || 'Banco'}`;
        } else if (transaction.method === 'international') {
          titleText = `Retiro Internacional - ${transaction.bankName || ''}`;
        }
        
        transactionItem.innerHTML = `
          <div class="transaction-history-icon">
            <i class="${iconClass}"></i>
          </div>
          <div class="transaction-history-content">
            <div class="transaction-history-title">${titleText}</div>
            <div class="transaction-history-info">
              <div class="status-badge ${statusClass}">${statusText}</div>
              <div style="margin-top: 0.35rem; font-size: 0.75rem;">${transaction.bankName || ''} • ${transaction.destination || ''}</div>
              ${transaction.reason ? `<div style="margin-top: 0.25rem; font-size: 0.75rem; color: var(--danger);">${transaction.reason}</div>` : ''}
            </div>
            <div class="transaction-history-date">${transaction.formattedDate}</div>
          </div>
          <div class="transaction-history-amount">${formatCurrency(transaction.amount, transaction.method === 'international' ? 'usd' : 'bs')}</div>
        `;
        
        historyList.appendChild(transactionItem);
      });
    }
    
    // Actualizar UI de transacciones pendientes
    function updatePendingTransactionsUI() {
      const pendingList = document.getElementById('pending-transactions-list');
      const noPendingMessage = document.getElementById('no-pending-message');
      
      if (!pendingList) return;
      
      // Limpiar lista actual
      pendingList.innerHTML = '';
      
      // Mostrar mensaje si no hay pendientes
      if (pendingTransactions.length === 0) {
        if (noPendingMessage) noPendingMessage.style.display = 'block';
        return;
      } else {
        if (noPendingMessage) noPendingMessage.style.display = 'none';
      }
      
      // Crear elementos de transacciones pendientes
      pendingTransactions.forEach(transaction => {
        const pendingItem = document.createElement('div');
        pendingItem.className = 'pending-transaction-item';
        
        // Icono según estado
        let iconClass = 'fas fa-clock';
        let statusText = 'Pendiente';
        let statusClass = 'pending';
        
        if (transaction.status === 'pending_verification') {
          iconClass = 'fas fa-clock';
          statusText = 'Pendiente de Verificación';
          statusClass = 'pending';
        } else if (transaction.status === 'processing') {
          iconClass = 'fas fa-sync-alt';
          statusText = 'Procesando';
          statusClass = 'processing';
        }
        
        // Determinar título según método
        let titleText = '';
        if (transaction.method === 'mobile') {
          titleText = 'Retiro a Pago Móvil';
        } else if (transaction.method === 'bank') {
          titleText = `Retiro a ${transaction.bankName || 'Banco'}`;
        } else if (transaction.method === 'international') {
          titleText = `Retiro Internacional - ${transaction.bankName || ''}`;
        }
        
        pendingItem.innerHTML = `
          <div class="pending-transaction-icon">
            <i class="${iconClass}"></i>
          </div>
          <div class="pending-transaction-content">
            <div class="pending-transaction-title">${titleText}</div>
            <div class="pending-transaction-info">
              <div class="status-badge ${statusClass}">${statusText}</div>
              <div style="margin-top: 0.35rem; font-size: 0.75rem;">Orden #${transaction.id} • ${transaction.formattedDate}</div>
            </div>
          </div>
          <div class="pending-transaction-amount">${formatCurrency(transaction.amount, transaction.method === 'international' ? 'usd' : 'bs')}</div>
        `;
        
        pendingList.appendChild(pendingItem);
      });
      
      // Actualizar badges en navegación
      updateNavBadges();
    }
    
    // Agregar nueva transacción pendiente y actualizar UI
    function addPendingTransaction(transaction) {
      // Agregar a la lista
      pendingTransactions.unshift(transaction);
      
      // Guardar en sessionStorage
      try {
        sessionStorage.setItem(CONFIG.STORAGE_KEYS.PENDING_TRANSACTIONS, JSON.stringify(pendingTransactions));
      } catch (e) {
        console.error('Error al guardar transacción pendiente:', e);
      }
      
      // Actualizar UI
      updatePendingTransactionsUI();
    }
    
    // Configurar timer de inactividad
    function setupInactivityTimer() {
      // Reset timer cada vez que el usuario interactúa
      const userEvents = ['mousemove', 'mousedown', 'keypress', 'touchstart', 'scroll'];
      
      userEvents.forEach(event => {
        document.addEventListener(event, resetInactivityTimer);
      });
      
      // Iniciar timer de inactividad
      startInactivityTimer();
    }
    
    // Reiniciar timer de inactividad
    function resetInactivityTimer() {
      userLastActivity = Date.now();
      inactivityCountdown = CONFIG.INACTIVITY_TIMEOUT;
      
      // Ocultar contador si está visible
      const timeRemaining = document.getElementById('time-remaining');
      if (timeRemaining) timeRemaining.style.display = 'none';
      
      // Reiniciar timer
      if (inactivityTimer) {
        clearInterval(inactivityTimer);
      }
      startInactivityTimer();
    }
    
    // Iniciar timer de inactividad
    function startInactivityTimer() {
      inactivityTimer = setInterval(function() {
        const currentTime = Date.now();
        const timeSinceLastActivity = (currentTime - userLastActivity) / 1000; // en segundos
        
        if (timeSinceLastActivity >= CONFIG.INACTIVITY_TIMEOUT) {
          clearInterval(inactivityTimer);
          redirectDueToInactivity();
        } else if (timeSinceLastActivity >= CONFIG.INACTIVITY_TIMEOUT - 60) { // Mostrar contador 60 segundos antes de redirección
          showInactivityCountdown(Math.floor(CONFIG.INACTIVITY_TIMEOUT - timeSinceLastActivity));
        }
      }, 1000);
    }
    
    // Mostrar cuenta regresiva de inactividad
    function showInactivityCountdown(seconds) {
      const timeRemaining = document.getElementById('time-remaining');
      const redirectCountdown = document.getElementById('redirect-countdown');
      const timeRemainingProgress = document.getElementById('time-remaining-progress');
      
      if (timeRemaining) timeRemaining.style.display = 'block';
      if (redirectCountdown) redirectCountdown.textContent = seconds;
      
      // Actualizar barra de progreso
      if (timeRemainingProgress) {
        const progressWidth = (seconds / 60) * 100;
        timeRemainingProgress.style.width = `${progressWidth}%`;
      }
    }
    
    // Redireccionar por inactividad
    function redirectDueToInactivity() {
      showToast('info', 'Sesión Inactiva', 'Redirigiendo a la página principal por inactividad...');
      
      setTimeout(function() {
        window.location.href = 'recarga.html';
      }, 2000);
    }

    // Generar código de verificación aleatorio
    function generateVerificationCode() {
      const verificationRef = document.getElementById('verification-reference');
      const verificationRefPagoMovil = document.getElementById('verification-reference-pago-movil');
      const receiptOrder = document.getElementById('receipt-order');
      
      const randomCode = CONFIG.VERIFICATION_CODE;
      
      if (verificationRef) verificationRef.textContent = randomCode;
      if (verificationRefPagoMovil) verificationRefPagoMovil.textContent = randomCode;
      if (receiptOrder) receiptOrder.textContent = `RET-${randomCode}`;
      
      // Actualizar los atributos data-copy de los botones de copia
      const copyBtn = document.getElementById('reference-copy-btn');
      if (copyBtn) copyBtn.setAttribute('data-copy', `VER${randomCode}`);
      
      const copyBtnPagoMovil = document.getElementById('reference-pago-movil-copy-btn');
      if (copyBtnPagoMovil) copyBtnPagoMovil.setAttribute('data-copy', `VER${randomCode}`);
    }

    // Actualizar fecha en el recibo
    function updateReceiptDate() {
      const receiptDate = document.getElementById('receipt-date');
      
      const date = new Date();
      const options = { day: 'numeric', month: 'long', year: 'numeric' };
      const formattedDate = date.toLocaleDateString('es-ES', options);
      
      if (receiptDate) receiptDate.textContent = formattedDate;
    }

    // Cargar datos del usuario desde sessionStorage
    function loadUserDataFromSession() {
      // Constantes para claves de sessionStorage
      const STORAGE_KEYS = {
        BALANCE: 'remeexSessionBalance',
        EXCHANGE_RATE: 'remeexSessionExchangeRate',
        TRANSFER_DATA: 'remeexTransferData',
        VERIFICATION_STATUS: 'remeexVerificationStatus'
      };
      
      // Recuperar balance y tasa de cambio
      try {
        // Recuperar balance
        const balanceJson = sessionStorage.getItem(STORAGE_KEYS.BALANCE);
        if (balanceJson) {
          const balance = JSON.parse(balanceJson);
          
          // Actualizar balance del usuario
          currentUser.balance = balance;
        }
        
        // Recuperar estado de verificación
        const verificationStatus = sessionStorage.getItem(STORAGE_KEYS.VERIFICATION_STATUS);
        if (verificationStatus) {
          currentUser.isVerified = verificationStatus === 'verified';
          verificationInProgress = verificationStatus === 'in_progress';
        }
        
        const exchangeRateJson = sessionStorage.getItem(STORAGE_KEYS.EXCHANGE_RATE);
        if (exchangeRateJson) {
          try {
            const rates = JSON.parse(exchangeRateJson);
            if (typeof rates === "number") {
              CONFIG.EXCHANGE_RATES.USD_TO_BS = rates;
            } else {
              if (rates.USD_TO_BS) CONFIG.EXCHANGE_RATES.USD_TO_BS = rates.USD_TO_BS;
              if (rates.USD_TO_EUR) CONFIG.EXCHANGE_RATES.USD_TO_EUR = rates.USD_TO_EUR;
            }
          } catch(e) {
            CONFIG.EXCHANGE_RATES.USD_TO_BS = parseFloat(exchangeRateJson);
          }
        }
        
        // Recuperar datos de transferencia si existen
        const transferDataJson = sessionStorage.getItem(STORAGE_KEYS.TRANSFER_DATA);
        if (transferDataJson) {
          const transferData = JSON.parse(transferDataJson);
          
          // Si hay un monto de transferencia guardado, rellenarlo
          if (transferData.amount) {
            const amountInput = document.getElementById('withdrawal-amount');
            if (amountInput) {
              amountInput.value = formatNumberWithCommas(transferData.amount);
              // Disparar evento input para calcular equivalentes
              const event = new Event('input');
              amountInput.dispatchEvent(event);
            }
          }
        }
      } catch (e) {
        console.error('Error al cargar datos de sesión:', e);
      }
      
      // Intentar cargar desde sessionStorage antiguo (compatibilidad)
      if (currentUser.balance.bs === 0) {
        const balanceData = sessionStorage.getItem(CONFIG.STORAGE_KEYS.BALANCE);
        const userData = sessionStorage.getItem(CONFIG.STORAGE_KEYS.USER_DATA);
        const verificationStatus = sessionStorage.getItem(CONFIG.STORAGE_KEYS.VERIFICATION);
        
        if (balanceData) {
          try {
            currentUser.balance = JSON.parse(balanceData);
          } catch (e) {
            console.error('Error al parsear datos de balance:', e);
          }
        }
        
        if (userData) {
          try {
            const user = JSON.parse(userData);
            currentUser.name = user.name || '';
            currentUser.fullName = user.fullName || '';
            currentUser.email = user.email || '';
          } catch (e) {
            console.error('Error al parsear datos de usuario:', e);
          }
        }
        
        if (verificationStatus) {
          currentUser.isVerified = verificationStatus === 'verified';
          verificationInProgress = verificationStatus === 'in_progress';
        }
      }
      
      // Actualizar la interfaz con los datos cargados
      updateBalanceDisplay();
      
      // Si la verificación está en progreso, mostrar el contenedor de estado
      if (verificationInProgress) {
        const verificationStatusContainer = document.getElementById('verification-status-container');
        if (verificationStatusContainer) {
          verificationStatusContainer.style.display = 'block';
        }
        
        // Ocultar banner de verificación si está en progreso
        const verifyBanner = document.getElementById('verify-banner');
        if (verifyBanner) {
          verifyBanner.style.display = 'none';
        }
      } else if (!currentUser.isVerified) {
        // Mostrar banner de verificación si no está verificado
        const verifyBanner = document.getElementById('verify-banner');
        if (verifyBanner) {
          verifyBanner.style.display = 'flex';
        }
      }
    }

    // Configurar event listeners
    function setupEventListeners() {
      // Event listeners para pestañas
      setupTabsEventListeners();
      
      // Manejo de la cantidad a retirar
      setupAmountInput();
      
      // Selección de método de retiro
      setupMethodSelection();
      
      // Selección de logos de bancos
      setupBankLogoSelection();
      
      // Manejo del formulario internacional
      setupInternationalForm();
      
      // Botones de verificación
      setupVerificationButtons();
      
      // Botón de envío del formulario
      setupSubmitButton();
      
      // Botones de copia
      setupCopyButtons();
      
      // Botones del recibo
      setupReceiptButtons();
      
      // Botones de información de seguridad
      setupSecurityInfoButtons();
      
      // Botones de FAQ
      setupFaqButtons();
      
      // Botones de estado de verificación
      setupVerificationStatusButtons();

      // NUEVO: Configurar modal de confirmación
      setupConfirmationModal();

      // Modal de confirmación de retiro
      setupWithdrawalConfirmationModal();
    }
    
    // NUEVO: Configurar modal de confirmación
    function setupConfirmationModal() {
      const modal = document.getElementById('verification-confirmation-modal');
      const proceedBtn = document.getElementById('confirmation-proceed-btn');
      const cancelBtn = document.getElementById('confirmation-cancel-btn');
      
      if (proceedBtn) {
        proceedBtn.addEventListener('click', function() {
          // Ocultar modal
          if (modal) modal.style.display = 'none';
          
          // Redirigir a página de recarga
          window.location.href = 'recarga.html';
        });
      }
      
      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          // Ocultar modal
          if (modal) modal.style.display = 'none';
        });
      }
    }
    
    // Configurar event listeners para pestañas
    function setupTabsEventListeners() {
      const tabItems = document.querySelectorAll('.tab-item');
      if (!tabItems.length) return;
      
      tabItems.forEach(tab => {
        tab.addEventListener('click', function() {
          // Desactivar todas las pestañas
          tabItems.forEach(item => {
            item.classList.remove('active');
          });
          
          // Activar la pestaña seleccionada
          this.classList.add('active');
          
          // Ocultar todos los contenidos de pestañas
          const tabContents = document.querySelectorAll('.tab-content');
          tabContents.forEach(content => {
            content.classList.remove('active');
          });
          
          // Mostrar el contenido de la pestaña seleccionada
          const tabId = this.getAttribute('data-tab');
          const activeContent = document.getElementById(`${tabId}-tab`);
          if (activeContent) {
            activeContent.classList.add('active');
          }
          
          // Actualizar navegación inferior
          if (tabId === 'new-withdrawal') {
            updateActiveNavItem('nav-create-withdrawal');
          } else if (tabId === 'pending') {
            updateActiveNavItem('nav-pending-operations');
          } else if (tabId === 'history') {
            updateActiveNavItem('nav-history');
          }
        });
      });
    }
    
    // Poblar grillas de logos de bancos
    function populateBankLogos() {
      const mobileBankGrid = document.getElementById('mobile-bank-grid');
      const bankNameGrid = document.getElementById('bank-name-grid');
      
      // Función para llenar la grilla con logos de bancos
      function fillBankGrid(grid, banks, type) {
        if (!grid) return;
        
        grid.innerHTML = '';
        
        // Mostrar solo los primeros 8 bancos por defecto
        const displayBanks = banks.slice(0, 8);
        
        displayBanks.forEach(bank => {
          const bankItem = document.createElement('div');
          bankItem.className = 'bank-logo-item';
          bankItem.setAttribute('data-bank-id', bank.id);
          bankItem.setAttribute('data-bank-name', bank.name);
          bankItem.setAttribute('data-bank-logo', bank.logo);
          bankItem.setAttribute('data-bank-type', type);
          
          bankItem.innerHTML = `
            <div class="bank-logo-container">
              <img src="${bank.logo}" alt="${bank.name}" class="bank-logo">
            </div>
            <div class="bank-name">${bank.name}</div>
          `;
          
          grid.appendChild(bankItem);
        });
        
        // Agregar botón "Ver más bancos" si hay más de 8
        if (banks.length > 8) {
          const moreButton = document.createElement('div');
          moreButton.className = 'bank-logo-item';
          moreButton.style.background = 'var(--neutral-100)';
          moreButton.innerHTML = `
            <div class="bank-logo-container" style="color: var(--primary);">
              <i class="fas fa-ellipsis-h" style="font-size: 1.5rem;"></i>
            </div>
            <div class="bank-name">Ver más bancos</div>
          `;
          
          moreButton.addEventListener('click', function() {
            // Mostrar todos los bancos
            grid.innerHTML = '';
            
            banks.forEach(bank => {
              const bankItem = document.createElement('div');
              bankItem.className = 'bank-logo-item';
              bankItem.setAttribute('data-bank-id', bank.id);
              bankItem.setAttribute('data-bank-name', bank.name);
              bankItem.setAttribute('data-bank-logo', bank.logo);
              bankItem.setAttribute('data-bank-type', type);
              
              bankItem.innerHTML = `
                <div class="bank-logo-container">
                  <img src="${bank.logo}" alt="${bank.name}" class="bank-logo">
                </div>
                <div class="bank-name">${bank.name}</div>
              `;
              
              grid.appendChild(bankItem);
            });
            
            // Agregar botón "Ver menos"
            const lessButton = document.createElement('div');
            lessButton.className = 'bank-logo-item';
            lessButton.style.background = 'var(--neutral-100)';
            lessButton.innerHTML = `
              <div class="bank-logo-container" style="color: var(--primary);">
                <i class="fas fa-chevron-up" style="font-size: 1.5rem;"></i>
              </div>
              <div class="bank-name">Ver menos</div>
            `;
            
            lessButton.addEventListener('click', function() {
              // Recargar los primeros 8 bancos
              fillBankGrid(grid, banks, type);
            });
            
            grid.appendChild(lessButton);
          });
          
          grid.appendChild(moreButton);
        }
      }
      
      // Llenar grids con bancos nacionales
      fillBankGrid(mobileBankGrid, CONFIG.BANKS.NACIONAL, 'mobile');
      fillBankGrid(bankNameGrid, CONFIG.BANKS.NACIONAL, 'bank');
    }
    
    // Configurar selección de logos de bancos
    function setupBankLogoSelection() {
      // Escuchar clicks en logo-items dentro de grillas de bancos
      document.addEventListener('click', function(e) {
        const logoItem = e.target.closest('.bank-logo-item');
        if (!logoItem) return;
        
        // Obtener tipo de banco (mobile o bank) y grilla correspondiente
        const bankType = logoItem.getAttribute('data-bank-type');
        const grid = logoItem.parentElement;
        
        // Si es botón de "Ver más" o "Ver menos", ignorar
        if (!logoItem.getAttribute('data-bank-id')) return;
        
        // Quitar clase active de todos los items en la grilla
        const items = grid.querySelectorAll('.bank-logo-item');
        items.forEach(item => {
          if (item.getAttribute('data-bank-id')) {
            item.classList.remove('active');
          }
        });
        
        // Agregar clase active al item seleccionado
        logoItem.classList.add('active');
        
        // Guardar selección en variable global
        const bankId = logoItem.getAttribute('data-bank-id');
        const bankName = logoItem.getAttribute('data-bank-name');
        const bankLogo = logoItem.getAttribute('data-bank-logo');
        
        selectedBank[bankType] = {
          id: bankId,
          name: bankName,
          logo: bankLogo
        };
        
        // Actualizar input oculto correspondiente
        const inputId = bankType === 'mobile' ? 'mobile-bank' : 'bank-name';
        const hiddenInput = document.getElementById(inputId);
        if (hiddenInput) {
          hiddenInput.value = bankId;
        }
        
        // Actualizar visualización de flujo de fondos
        updateFundsJourney();
        
        // Mostrar toast de confirmación
        showToast('success', 'Banco Seleccionado', `Has seleccionado ${bankName}`);
      });
    }
    
    // Formatear número con separadores de miles (punto) y decimal (coma)
    function formatNumberWithCommas(number) {
      // Primero, convertir a string y eliminar caracteres no numéricos excepto el punto
      let value = number.toString().replace(/[^\d.]/g, '');
      
      // Si hay más de un punto decimal, dejar solo el primero
      const decimalPoints = value.match(/\./g);
      if (decimalPoints && decimalPoints.length > 1) {
        let firstDecimalIndex = value.indexOf('.');
        value = value.substring(0, firstDecimalIndex + 1) + 
                value.substring(firstDecimalIndex + 1).replace(/\./g, '');
      }
      
      // Separar parte entera y decimal
      let parts = value.split('.');
      let integerPart = parts[0];
      let decimalPart = parts.length > 1 ? parts[1] : '';
      
      // Limitar la parte decimal a 2 dígitos
      decimalPart = decimalPart.substring(0, 2);
      if (decimalPart.length < 2) {
        decimalPart = decimalPart.padEnd(2, '0');
      }
      
      // Agregar separadores de miles (punto) a la parte entera
      integerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
      
      // Unir con coma como separador decimal
      return integerPart + ',' + decimalPart;
    }
    
    // Parsear número desde formato introducido por el usuario
    function parseUserAmount(input) {
      if (!input) return 0;

      input = input.toString().trim();

      // Si contiene separadores, el último se trata como decimal
      if (input.includes(',') || input.includes('.')) {
        const lastComma = input.lastIndexOf(',');
        const lastDot = input.lastIndexOf('.');
        const lastIndex = Math.max(lastComma, lastDot);

        let integerPart = input.slice(0, lastIndex).replace(/[.,\s]/g, '');
        let decimalPart = input.slice(lastIndex + 1).replace(/[.,\s]/g, '').slice(0, 2);

        if (decimalPart.length === 1) decimalPart += '0';

        return parseFloat(integerPart + '.' + decimalPart) || 0;
      }

      const digits = input.replace(/\D/g, '');

      // Heurística: si hay más de 6 dígitos y no hay separadores, los dos últimos son decimales
      if (digits.length > 6) {
        const intPart = digits.slice(0, -2);
        const decPart = digits.slice(-2);
        return parseFloat(intPart + '.' + decPart) || 0;
      }

      return parseFloat(digits) || 0;
    }
    
    // Configurar input de cantidad
    function setupAmountInput() {
      const amountInput = document.getElementById('withdrawal-amount');
      if (!amountInput) return;

      amountInput.addEventListener('input', function() {
        withdrawalAmount = parseUserAmount(this.value);
        withdrawalAmountUsd = withdrawalAmount / CONFIG.EXCHANGE_RATES.USD_TO_BS;
        withdrawalAmountEur = withdrawalAmountUsd * CONFIG.EXCHANGE_RATES.USD_TO_EUR;
        updateEquivalentsDisplay();
        saveTransferData();
      });

      amountInput.addEventListener('blur', function() {
        this.value = withdrawalAmount ? formatNumberWithCommas(withdrawalAmount) : '';
      });

      const event = new Event('input');
      amountInput.dispatchEvent(event);
    }
    
    // Guardar datos de transferencia para recuperación
    function saveTransferData() {
      const transferData = {
        amount: withdrawalAmount > 0 ? withdrawalAmount.toString() : '',
        method: selectedMethod
      };
      
      // Guardar en sessionStorage
      try {
        sessionStorage.setItem('remeexTransferData', JSON.stringify(transferData));
      } catch (e) {
        console.error('Error al guardar datos de transferencia:', e);
      }
    }

    // Actualizar display de equivalentes
    function updateEquivalentsDisplay() {
      const amountEquivalents = document.getElementById('amount-equivalents');
      
      if (amountEquivalents) {
        amountEquivalents.textContent = `≈ ${formatCurrency(withdrawalAmountUsd, 'usd')} | ≈ ${formatCurrency(withdrawalAmountEur, 'eur')}`;
      }
    }

    // Configurar selección de método
    function setupMethodSelection() {
      const methodOptions = document.querySelectorAll('.method-option');
      
      methodOptions.forEach(option => {
        option.addEventListener('click', function() {
          // Actualizar selección visual
          methodOptions.forEach(opt => opt.classList.remove('active'));
          this.classList.add('active');
          
          // Guardar método seleccionado
          selectedMethod = this.getAttribute('data-method');
          
          // Mostrar formulario correspondiente
          const forms = document.querySelectorAll('.bank-selection');
          forms.forEach(form => form.classList.remove('active'));
          
          const selectedForm = document.getElementById(`${selectedMethod}-transfer-form`);
          if (selectedForm) {
            selectedForm.classList.add('active');
          } else {
            document.getElementById('mobile-payment-form').classList.add('active');
          }
          
          // Verificar límites según método seleccionado
          checkWithdrawalLimits();
          
          // Actualizar visualización de flujo de fondos
          updateFundsJourney();
          
          // Guardar método en sessionStorage
          saveTransferData();
        });
      });
    }

    // Configurar formulario internacional
    function setupInternationalForm() {
      const intMethod = document.getElementById('int-method');
      
      if (intMethod) {
        intMethod.addEventListener('change', function() {
          // Ocultar todos los formularios
          document.getElementById('zelle-form').style.display = 'none';
          document.getElementById('paypal-form').style.display = 'none';
          document.getElementById('swift-form').style.display = 'none';
          document.getElementById('crypto-form').style.display = 'none';
          document.getElementById('wise-form').style.display = 'none';
          
          // Mostrar el formulario seleccionado
          const selectedForm = document.getElementById(`${this.value}-form`);
          if (selectedForm) {
            selectedForm.style.display = 'block';
          }
          
          // Actualizar visualización de flujo de fondos
          updateFundsJourney();
        });
      }
    }

    // Verificar límites de retiro
    function checkWithdrawalLimits() {
      const methodElement = document.querySelector(`.method-option[data-method="${selectedMethod}"]`);
      
      if (methodElement) {
        const limit = parseFloat(methodElement.getAttribute('data-limit')) || 0;
        
        if (limit > 0 && withdrawalAmount > limit) {
          showToast('warning', 'Límite Excedido', `El monto máximo para ${methodElement.querySelector('.method-label').textContent} es ${formatCurrency(limit, 'bs')}`);
          
          // Ajustar el monto al límite
          const amountInput = document.getElementById('withdrawal-amount');
          if (amountInput) {
            amountInput.value = formatNumberWithCommas(limit);
            
            // Disparar evento de input para actualizar equivalentes
            const event = new Event('input');
            amountInput.dispatchEvent(event);
          }
        }
      }
    }

    // Configurar botones de verificación
    function setupVerificationButtons() {
      // Botón de verificar ahora en el banner
      const verifyNowBtn = document.getElementById('verify-now-btn');
      if (verifyNowBtn) {
        verifyNowBtn.addEventListener('click', function() {
          showVerificationConfirmation();
        });
      }
      
      // Botón de verificar desde el recibo
      const verifyFromReceipt = document.getElementById('verify-from-receipt');
      if (verifyFromReceipt) {
        verifyFromReceipt.addEventListener('click', function() {
          const receiptModal = document.getElementById('receipt-modal');
          if (receiptModal) receiptModal.style.display = 'none';
          showVerificationConfirmation();
        });
      }
    }
    
    // NUEVO: Mostrar modal de confirmación de verificación
    function showVerificationConfirmation() {
      const modal = document.getElementById('verification-confirmation-modal');
      if (modal) {
        modal.style.display = 'flex';
      } else {
        // Fallback si no existe el modal
        window.location.href = 'recarga.html';
      }
    }

    // Configurar modal de confirmación de retiro
    function setupWithdrawalConfirmationModal() {
      const modal = document.getElementById('withdrawal-confirmation-modal');
      const confirmBtn = document.getElementById('confirm-withdrawal-btn');
      const cancelBtn = document.getElementById('cancel-withdrawal-btn');

      if (confirmBtn) {
        confirmBtn.addEventListener('click', function() {
          if (modal) modal.style.display = 'none';
          processWithdrawal();
        });
      }

      if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
          if (modal) modal.style.display = 'none';
        });
      }
    }

    // Mostrar confirmación de retiro
    function showWithdrawalConfirmation() {
      const modal = document.getElementById('withdrawal-confirmation-modal');
      if (!modal) return;

      const messageEl = document.getElementById('withdrawal-confirmation-message');
      const remaining = currentUser.balance.bs - withdrawalAmount;
      if (messageEl) {
        messageEl.innerHTML = `Vas a retirar <strong>${formatCurrency(withdrawalAmount, 'bs')}</strong>.<br>Tu saldo restante será <strong>${formatCurrency(remaining, 'bs')}</strong>.`;
      }

      modal.style.display = 'flex';
    }

    // Configurar botones de información de seguridad
    function setupSecurityInfoButtons() {
      // Botón para mostrar modal de información de seguridad
      const showSecurityInfoBtn = document.getElementById('show-security-info');
      const securityInfoModal = document.getElementById('security-info-modal');
      
      if (showSecurityInfoBtn && securityInfoModal) {
        showSecurityInfoBtn.addEventListener('click', function(e) {
          e.preventDefault();
          securityInfoModal.style.display = 'flex';
        });
      }
      
      // Botones para cerrar modal de información de seguridad
      const closeSecurityInfoBtns = [
        document.getElementById('close-security-info'),
        document.getElementById('close-security-info-btn')
      ];
      
      closeSecurityInfoBtns.forEach(btn => {
        if (btn) {
          btn.addEventListener('click', function() {
            if (securityInfoModal) {
              securityInfoModal.style.display = 'none';
            }
          });
        }
      });
      
      // Botón de información sobre balance
      const infoBalanceBadge = document.getElementById('info-balance-badge');
      if (infoBalanceBadge) {
        infoBalanceBadge.addEventListener('click', function() {
          showToast('info', 'Saldo Disponible', 'Este es tu saldo total disponible para retiro. Los montos se actualizan automáticamente según la tasa de cambio actual.');
        });
      }
    }
    
    // Configurar botones de FAQ
    function setupFaqButtons() {
      // Alternar visibilidad del contenido de FAQ
      const faqHeaders = document.querySelectorAll('.faq-header');
      
      faqHeaders.forEach(header => {
        header.addEventListener('click', function() {
          const content = this.nextElementSibling;
          const icon = this.querySelector('i.fas');
          
          // Toggle content
          if (content.style.display === 'block') {
            content.style.display = 'none';
            if (icon) icon.className = 'fas fa-chevron-down';
          } else {
            content.style.display = 'block';
            if (icon) icon.className = 'fas fa-chevron-up';
          }
        });
      });
      
      // Botón FAQ en las opciones de contacto
      const faqBtn = document.getElementById('faq-btn');
      const securityInfoModal = document.getElementById('security-info-modal');
      
      if (faqBtn && securityInfoModal) {
        faqBtn.addEventListener('click', function(e) {
          e.preventDefault();
          securityInfoModal.style.display = 'flex';
        });
      }
    }

    // Configurar botones de estado de verificación
    function setupVerificationStatusButtons() {
      const checkStatusBtn = document.getElementById('verification-check-status-btn');
      const contactSupportBtn = document.getElementById('verification-contact-support-btn');
      
      if (checkStatusBtn) {
        checkStatusBtn.addEventListener('click', function() {
          showLoading('Verificando el estado de tu proceso...');
          
          setTimeout(() => {
            hideLoading();
            showToast('info', 'Estado de Verificación', 'Tu verificación sigue en proceso. Por favor, espera un poco más.');
          }, 2000);
        });
      }
      
      if (contactSupportBtn) {
        contactSupportBtn.addEventListener('click', function() {
          // Abrir WhatsApp con mensaje predefinido
          const message = encodeURIComponent(`Hola, he realizado mi depósito de verificación con referencia VER${CONFIG.VERIFICATION_CODE} y estoy consultando el estado del proceso.`);
          window.open(`https://wa.me/+17373018059?text=${message}`, '_blank');
        });
      }
    }

    // Configurar botón de envío
    function setupSubmitButton() {
      const submitBtn = document.getElementById('submit-withdrawal');

      if (submitBtn) {
        submitBtn.addEventListener('click', function() {
          const amountInput = document.getElementById('withdrawal-amount');
          if (amountInput) {
            withdrawalAmount = parseUserAmount(amountInput.value);
            withdrawalAmountUsd = withdrawalAmount / CONFIG.EXCHANGE_RATES.USD_TO_BS;
            withdrawalAmountEur = withdrawalAmountUsd * CONFIG.EXCHANGE_RATES.USD_TO_EUR;
          }

          // Validar monto
          if (withdrawalAmount <= 0) {
            showToast('error', 'Monto Inválido', 'Por favor ingresa un monto mayor a cero.');
            return;
          }
          
          // Validar saldo suficiente
          if (withdrawalAmount > currentUser.balance.bs) {
            showToast('error', 'Saldo Insuficiente', 'No tienes fondos suficientes para realizar este retiro.');
            return;
          }
          
          // Validar límites
          checkWithdrawalLimits();
          
          // Validar banco seleccionado
          if (!validateBankSelected()) {
            return;
          }
          
          // Validar datos según método seleccionado
          if (!validateFormData()) {
            return;
          }
          
          // Mostrar confirmación
          showWithdrawalConfirmation();
        });
      }
    }

    // Ejecutar el proceso de retiro
    function processWithdrawal() {
      // Mostrar loading
      showLoading('Procesando tu solicitud...');

      // Simular progreso
      simulateProcessing(function() {
        // Crear nueva transacción pendiente
        const newTransaction = createTransactionObject();
        saveBankingInfo();

        // Agregar a la lista de pendientes
        addPendingTransaction(newTransaction);

        // Actualizar recibo
        updateReceiptData();

        // Mostrar recibo
        const receiptModal = document.getElementById('receipt-modal');
        if (receiptModal) receiptModal.style.display = 'flex';

        // Mostrar banner de verificación si no está verificado y no está en proceso
        if (!currentUser.isVerified && !verificationInProgress) {
          const verifyBanner = document.getElementById('verify-banner');
          if (verifyBanner) verifyBanner.style.display = 'flex';
        }

        // Actualizar timeline
        const timelineProgress = document.getElementById('timeline-progress');
        if (timelineProgress) timelineProgress.style.width = '50%';

        document.getElementById('step-create').classList.remove('active');
        document.getElementById('step-create').classList.add('completed');
        document.getElementById('step-verify').classList.add('active');

        // Cambiar a la pestaña de operaciones pendientes
        const pendingTab = document.querySelector('.tab-item[data-tab="pending"]');
        if (pendingTab) {
          pendingTab.click();
        }

        // Actualizar navegación
        updateActiveNavItem('nav-pending-operations');
      });
    }
    
    // Crear objeto de transacción
    function createTransactionObject() {
      const transactionId = `RET-${CONFIG.VERIFICATION_CODE}`;
      const date = new Date();
      const formattedDate = date.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' });
      
      let destination = '';
      let bankName = '';
      
      // Obtener destino y banco según método
      if (selectedMethod === 'mobile') {
        const mobileNumber = document.getElementById('mobile-number');
        if (mobileNumber) destination = mobileNumber.value;
        
        if (selectedBank.mobile) {
          bankName = selectedBank.mobile.name;
        }
      } else if (selectedMethod === 'bank') {
        const accountNumber = document.getElementById('account-number');
        if (accountNumber) {
          const plainAccount = accountNumber.value.replace(/\D/g, '');
          destination = '****' + plainAccount.slice(-4);
        }
        
        if (selectedBank.bank) {
          bankName = selectedBank.bank.name;
        }
      } else if (selectedMethod === 'international') {
        const intMethod = document.getElementById('int-method');
        if (intMethod) {
          bankName = getInternationalMethodName(intMethod.value);
          
          // Determinar destino según método internacional
          switch(intMethod.value) {
            case 'zelle':
              const zelleEmail = document.getElementById('zelle-email');
              if (zelleEmail) destination = zelleEmail.value;
              break;
              
            case 'paypal':
              const paypalEmail = document.getElementById('paypal-email');
              if (paypalEmail) destination = paypalEmail.value;
              break;
              
            case 'wise':
              const wiseEmail = document.getElementById('wise-email');
              if (wiseEmail) destination = wiseEmail.value;
              break;
              
            case 'swift':
              const swiftAccount = document.getElementById('swift-account');
              if (swiftAccount) {
                const account = swiftAccount.value;
                if (account.length > 10) {
                  destination = account.substring(0, 6) + '...' + account.slice(-4);
                } else {
                  destination = account;
                }
              }
              break;
              
            case 'crypto':
              const cryptoAddress = document.getElementById('crypto-address');
              const cryptoCurrency = document.getElementById('crypto-currency');
              
              if (cryptoAddress) {
                const address = cryptoAddress.value;
                if (address.length > 15) {
                  destination = `${address.substring(0, 6)}...${address.slice(-6)}`;
                } else {
                  destination = address;
                }
              }
              
              if (cryptoCurrency) {
                const currencyText = getCryptoNameById(cryptoCurrency.value);
                bankName = currencyText;
              }
              break;
          }
        }
      }
      
      return {
        id: transactionId,
        amount: selectedMethod === 'international' ? withdrawalAmountUsd : withdrawalAmount,
        method: selectedMethod,
        destination: destination,
        bankName: bankName,
        bankLogo: selectedMethod === 'mobile' && selectedBank.mobile ? selectedBank.mobile.logo : (selectedMethod === 'bank' && selectedBank.bank ? selectedBank.bank.logo : ''),
        status: currentUser.isVerified ? 'processing' : 'pending_verification',
        date: date.toISOString(),
        formattedDate: formattedDate
      };
    }

    function saveBankingInfo() {
      if (selectedMethod !== 'bank') return;
      const accountNumberEl = document.getElementById('account-number');
      if (!accountNumberEl || !accountNumberEl.value) return;
      const data = {
        accountNumber: accountNumberEl.value.trim(),
        bankName: selectedBank.bank ? selectedBank.bank.name : '',
        bankLogo: selectedBank.bank ? selectedBank.bank.logo : '',
        bankId: selectedBank.bank ? selectedBank.bank.id : ''
      };
      try {
        localStorage.setItem('remeexVerificationBanking', JSON.stringify(data));
      } catch (e) {
        console.error('Error saving banking info', e);
      }
    }
    
    // Validar que se ha seleccionado un banco
    function validateBankSelected() {
      // Para método móvil
      if (selectedMethod === 'mobile') {
        if (!selectedBank.mobile) {
          showToast('error', 'Banco Requerido', 'Por favor, selecciona tu banco para pago móvil.');
          return false;
        }
      }
      
      // Para método de transferencia bancaria
      if (selectedMethod === 'bank') {
        if (!selectedBank.bank) {
          showToast('error', 'Banco Requerido', 'Por favor, selecciona el banco donde tienes tu cuenta.');
          return false;
        }
      }
      
      return true;
    }
    
    // Mostrar loading con progreso
    function showLoading(message = 'Procesando tu solicitud...') {
      const loadingOverlay = document.getElementById('loading-overlay');
      const loadingText = document.getElementById('loading-text');
      const progressBar = document.getElementById('progress-bar');
      
      if (loadingText) loadingText.textContent = message;
      if (progressBar) progressBar.style.width = '0%';
      if (loadingOverlay) loadingOverlay.style.display = 'flex';
    }
    
    // Ocultar loading
    function hideLoading() {
      const loadingOverlay = document.getElementById('loading-overlay');
      if (loadingOverlay) loadingOverlay.style.display = 'none';
    }
    
    // Simular procesamiento con progreso
    function simulateProcessing(callback) {
      const progressBar = document.getElementById('progress-bar');
      const loadingText = document.getElementById('loading-text');
      
      let width = 0;
      const interval = setInterval(function() {
        if (width >= 100) {
          clearInterval(interval);
          hideLoading();
          if (callback) callback();
        } else {
          width += 2;
          if (progressBar) progressBar.style.width = width + '%';
          
          // Actualizar texto según progreso
          if (loadingText) {
            if (width < 30) {
              loadingText.textContent = "Validando datos...";
            } else if (width < 60) {
              loadingText.textContent = "Preparando orden de retiro...";
            } else if (width < 90) {
              loadingText.textContent = "Verificando disponibilidad...";
            } else {
              loadingText.textContent = "¡Casi listo!";
            }
          }
        }
      }, 30);
    }

    // Validar datos del formulario
    function validateFormData() {
      let isValid = true;
      
      // Validar según método seleccionado
      if (selectedMethod === 'mobile') {
        const mobileNumber = document.getElementById('mobile-number');
        const mobileId = document.getElementById('mobile-id');
        const mobileName = document.getElementById('mobile-name');
        
        const numberError = document.getElementById('mobile-number-error');
        const idError = document.getElementById('mobile-id-error');
        const nameError = document.getElementById('mobile-name-error');
        
        // Reset errors
        if (numberError) numberError.style.display = 'none';
        if (idError) idError.style.display = 'none'; if (nameError) nameError.style.display = 'none';
        
        if (!mobileNumber || !mobileNumber.value) {
          if (numberError) numberError.style.display = 'block';
          isValid = false;
        } else if (!/^0[412][0-9]{8,9}$/.test(mobileNumber.value.replace(/\D/g, ''))) {
          if (numberError) {
            numberError.textContent = 'El número debe comenzar con 04XX y tener 10-11 dígitos.';
            numberError.style.display = 'block';
          }
          isValid = false;
        }
        
        if (!mobileId || !mobileId.value) {
          if (idError) idError.style.display = 'block';
          isValid = false;
        } else if (!/^[VEJPvejp][-.\s]?\d{6,9}$/.test(mobileId.value)) {
          if (idError) {
            idError.textContent = 'Formato de cédula inválido (ej: V-12345678).';
            idError.style.display = 'block';
          }
          isValid = false;
        }
        
        if (!mobileName || !mobileName.value || mobileName.value.trim().length < 5) {
          if (nameError) nameError.style.display = 'block';
          isValid = false;
        }
      } else if (selectedMethod === 'bank') {
        const accountType = document.getElementById('account-type');
        const accountNumber = document.getElementById('account-number');
        const accountId = document.getElementById('account-id');
        const accountName = document.getElementById('account-name');
        
        const accountNumberError = document.getElementById('account-number-error');
        const accountIdError = document.getElementById('account-id-error');
        const accountNameError = document.getElementById('account-name-error');
        
        // Reset errors
        if (accountNumberError) accountNumberError.style.display = 'none';
        if (accountIdError) accountIdError.style.display = 'none';
        if (accountNameError) accountNameError.style.display = 'none';
        
        // Validar tipo de cuenta
        if (!accountType || accountType.value === '') {
          showToast('error', 'Tipo de Cuenta Requerido', 'Por favor, selecciona el tipo de cuenta.');
          isValid = false;
        }
        
        // Validar número de cuenta
        if (!accountNumber || !accountNumber.value) {
          if (accountNumberError) accountNumberError.style.display = 'block';
          isValid = false;
        } else if (!/^\d{20}$/.test(accountNumber.value.replace(/\D/g, ''))) {
          if (accountNumberError) {
            accountNumberError.textContent = 'El número de cuenta debe tener 20 dígitos.';
            accountNumberError.style.display = 'block';
          }
          isValid = false;
        }
        
        // Validar cédula
        if (!accountId || !accountId.value) {
          if (accountIdError) accountIdError.style.display = 'block';
          isValid = false;
        } else if (!/^[VEJPvejp][-.\s]?\d{6,9}$/.test(accountId.value)) {
          if (accountIdError) {
            accountIdError.textContent = 'Formato de cédula inválido (ej: V-12345678).';
            accountIdError.style.display = 'block';
          }
          isValid = false;
        }
        
        // Validar nombre
        if (!accountName || !accountName.value || accountName.value.trim().length < 5) {
          if (accountNameError) accountNameError.style.display = 'block';
          isValid = false;
        }
      } else if (selectedMethod === 'international') {
        const intMethod = document.getElementById('int-method');
        
        if (!intMethod || intMethod.value === '') {
          showToast('error', 'Método Requerido', 'Por favor, selecciona el método de envío internacional.');
          isValid = false;
        } else {
          // Validar según el método internacional seleccionado
          switch(intMethod.value) {
            case 'zelle':
              const zelleEmail = document.getElementById('zelle-email');
              const zelleEmailError = document.getElementById('zelle-email-error');
              
              if (zelleEmailError) zelleEmailError.style.display = 'none';
              
              if (!zelleEmail || !zelleEmail.value) {
                if (zelleEmailError) zelleEmailError.style.display = 'block';
                isValid = false;
              } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(zelleEmail.value)) {
                if (zelleEmailError) {
                  zelleEmailError.textContent = 'Por favor, introduce un correo electrónico válido.';
                  zelleEmailError.style.display = 'block';
                }
                isValid = false;
              }
              break;
              
            case 'paypal':
              const paypalEmail = document.getElementById('paypal-email');
              const paypalEmailError = document.getElementById('paypal-email-error');
              
              if (paypalEmailError) paypalEmailError.style.display = 'none';
              
              if (!paypalEmail || !paypalEmail.value) {
                if (paypalEmailError) paypalEmailError.style.display = 'block';
                isValid = false;
              } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(paypalEmail.value)) {
                if (paypalEmailError) {
                  paypalEmailError.textContent = 'Por favor, introduce un correo electrónico válido.';
                  paypalEmailError.style.display = 'block';
                }
                isValid = false;
              }
              break;
              
            case 'wise':
              const wiseEmail = document.getElementById('wise-email');
              const wiseEmailError = document.getElementById('wise-email-error');
              
              if (wiseEmailError) wiseEmailError.style.display = 'none';
              
              if (!wiseEmail || !wiseEmail.value) {
                if (wiseEmailError) wiseEmailError.style.display = 'block';
                isValid = false;
              } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(wiseEmail.value)) {
                if (wiseEmailError) {
                  wiseEmailError.textContent = 'Por favor, introduce un correo electrónico válido.';
                  wiseEmailError.style.display = 'block';
                }
                isValid = false;
              }
              break;
              
            case 'swift':
              // Validar campos SWIFT/BIC
              const swiftBank = document.getElementById('swift-bank');
              const swiftCode = document.getElementById('swift-code');
              const swiftAccount = document.getElementById('swift-account');
              const swiftName = document.getElementById('swift-name');
              
              if (!swiftBank || !swiftBank.value) {
                showToast('error', 'Nombre del Banco Requerido', 'Por favor, ingresa el nombre del banco.');
                isValid = false;
              }
              
              if (!swiftCode || !swiftCode.value) {
                showToast('error', 'Código SWIFT Requerido', 'Por favor, ingresa el código SWIFT/BIC.');
                isValid = false;
              }
              
              if (!swiftAccount || !swiftAccount.value) {
                showToast('error', 'Número de Cuenta Requerido', 'Por favor, ingresa el número de cuenta o IBAN.');
                isValid = false;
              }
              
              if (!swiftName || !swiftName.value) {
                showToast('error', 'Nombre del Beneficiario Requerido', 'Por favor, ingresa el nombre del beneficiario.');
                isValid = false;
              }
              break;
              
            case 'crypto':
              const cryptoAddress = document.getElementById('crypto-address');
              const cryptoAddressError = document.getElementById('crypto-address-error');
              
              if (cryptoAddressError) cryptoAddressError.style.display = 'none';
              
              if (!cryptoAddress || !cryptoAddress.value) {
                if (cryptoAddressError) cryptoAddressError.style.display = 'block';
                isValid = false;
              }
              break;
          }
        }
      }
      
      return isValid;
    }

    // Actualizar datos del recibo
    function updateReceiptData() {
      const receiptAmount = document.getElementById('receipt-amount');
      const receiptMethod = document.getElementById('receipt-method');
      const receiptDestination = document.getElementById('receipt-destination');
      
      if (receiptAmount) receiptAmount.textContent = formatCurrency(withdrawalAmount, 'bs');
      
      if (receiptMethod) {
        switch(selectedMethod) {
          case 'mobile':
            receiptMethod.textContent = 'Pago Móvil';
            
            const mobileNumber = document.getElementById('mobile-number');
            
            if (receiptDestination && mobileNumber) {
              // Obtener nombre del banco seleccionado
              const bankName = selectedBank.mobile ? selectedBank.mobile.name : 'Banco';
              receiptDestination.textContent = `${mobileNumber.value} (${bankName})`;
            }
            break;
            
          case 'bank':
            receiptMethod.textContent = 'Transferencia Bancaria';
            
            const accountNumber = document.getElementById('account-number');
            
            if (receiptDestination && accountNumber) {
              // Obtener nombre del banco seleccionado
              const bankText = selectedBank.bank ? selectedBank.bank.name : 'Banco';
              
              // Formatear número de cuenta para mostrar solo últimos 4 dígitos
              let maskedAccount = '';
              if (accountNumber.value) {
                const plainAccount = accountNumber.value.replace(/\D/g, '');
                maskedAccount = '****' + plainAccount.slice(-4);
              }
              
              receiptDestination.textContent = `${maskedAccount} (${bankText})`;
            }
            break;
            
          case 'international':
            const intMethod = document.getElementById('int-method');
            
            if (intMethod) {
              // Obtener texto del método seleccionado
              const methodText = getInternationalMethodName(intMethod.value);
              
              if (receiptMethod) receiptMethod.textContent = methodText;
              
              // Determinar destino según método internacional
              if (receiptDestination) {
                switch(intMethod.value) {
                  case 'zelle':
                    const zelleEmail = document.getElementById('zelle-email');
                    if (zelleEmail) receiptDestination.textContent = zelleEmail.value;
                    break;
                    
                  case 'paypal':
                    const paypalEmail = document.getElementById('paypal-email');
                    if (paypalEmail) receiptDestination.textContent = paypalEmail.value;
                    break;
                    
                  case 'wise':
                    const wiseEmail = document.getElementById('wise-email');
                    if (wiseEmail) receiptDestination.textContent = wiseEmail.value;
                    break;
                    
                  case 'swift':
                    const swiftAccount = document.getElementById('swift-account');
                    if (swiftAccount) {
                      // Mostrar los primeros 6 caracteres y los últimos 4
                      const account = swiftAccount.value;
                      if (account.length > 10) {
                        receiptDestination.textContent = account.substring(0, 6) + '...' + account.slice(-4);
                      } else {
                        receiptDestination.textContent = account;
                      }
                    }
                    break;
                    
                  case 'crypto':
                    const cryptoAddress = document.getElementById('crypto-address');
                    const cryptoCurrency = document.getElementById('crypto-currency');
                    
                    if (cryptoAddress && cryptoCurrency) {
                      const currencyText = getCryptoNameById(cryptoCurrency.value);
                      const address = cryptoAddress.value;
                      
                      // Truncar dirección si es muy larga
                      if (address.length > 15) {
                        receiptDestination.textContent = `${address.substring(0, 6)}...${address.slice(-6)} (${currencyText})`;
                      } else {
                        receiptDestination.textContent = `${address} (${currencyText})`;
                      }
                    }
                    break;
                    
                  default:
                    receiptDestination.textContent = 'Destino Internacional';
                }
              }
            }
            break;
        }
      }
    }
    
    // Obtener nombre de método internacional
    function getInternationalMethodName(methodId) {
      const methodNames = {
        'zelle': 'Zelle',
        'paypal': 'PayPal',
        'wise': 'Wise (Transferwise)',
        'swift': 'Transferencia SWIFT',
        'crypto': 'Criptomonedas'
      };
      
      return methodNames[methodId] || 'Transferencia Internacional';
    }
    
    // Obtener nombre de criptomoneda por ID
    function getCryptoNameById(cryptoId) {
      const cryptoNames = {
        'btc': 'Bitcoin (BTC)',
        'eth': 'Ethereum (ETH)',
        'usdt': 'Tether (USDT)',
        'usdc': 'USD Coin (USDC)',
        'bnb': 'Binance Coin (BNB)'
      };
      
      return cryptoNames[cryptoId] || cryptoId.toUpperCase();
    }

    // Configurar botones de copia
    function setupCopyButtons() {
      const copyButtons = document.querySelectorAll('.copy-btn[data-copy]');
      
      copyButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const textToCopy = this.getAttribute('data-copy');
          
          navigator.clipboard.writeText(textToCopy)
            .then(() => {
              showToast('success', 'Copiado', 'Texto copiado al portapapeles');
            })
            .catch(err => {
              console.error('Error al copiar: ', err);
              showToast('error', 'Error', 'No se pudo copiar el texto');
            });
        });
      });
    }

    // Configurar botones del recibo
    function setupReceiptButtons() {
      const closeReceiptBtn = document.getElementById('close-receipt');
      
      if (closeReceiptBtn) {
        closeReceiptBtn.addEventListener('click', function() {
          const receiptModal = document.getElementById('receipt-modal');
          if (receiptModal) receiptModal.style.display = 'none';
        });
      }
      
      // Botones de compartir recibo
      setupShareButtons();
    }
    
    // Configurar botones de compartir
    function setupShareButtons() {
      const shareWhatsApp = document.getElementById('share-whatsapp');
      const shareEmail = document.getElementById('share-email');
      const shareDownload = document.getElementById('share-download');
      
      if (shareWhatsApp) {
        shareWhatsApp.addEventListener('click', function(e) {
          e.preventDefault();
          
          const receiptText = generateReceiptText();
          const encodedText = encodeURIComponent(receiptText);
          const whatsappUrl = `https://wa.me/?text=${encodedText}`;
          
          window.open(whatsappUrl, '_blank');
        });
      }
      
      if (shareEmail) {
        shareEmail.addEventListener('click', function(e) {
          e.preventDefault();
          
          const receiptText = generateReceiptText();
          const encodedText = encodeURIComponent(receiptText);
          const subject = encodeURIComponent('Comprobante de Retiro - REMEEX');
          
          window.location.href = `mailto:?subject=${subject}&body=${encodedText}`;
        });
      }
      
      if (shareDownload) {
        shareDownload.addEventListener('click', function(e) {
          e.preventDefault();
          
          const receiptText = generateReceiptText();
          const blob = new Blob([receiptText], { type: 'text/plain' });
          const url = URL.createObjectURL(blob);
          
          const a = document.createElement('a');
          a.href = url;
          a.download = 'Comprobante-REMEEX-RET-' + CONFIG.VERIFICATION_CODE + '.txt';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        });
      }
    }
    
    // Generar texto del recibo para compartir
    function generateReceiptText() {
      const orderId = document.getElementById('receipt-order').textContent;
      const amount = document.getElementById('receipt-amount').textContent;
      const date = document.getElementById('receipt-date').textContent;
      const method = document.getElementById('receipt-method').textContent;
      const destination = document.getElementById('receipt-destination').textContent;
      
      return `COMPROBANTE DE RETIRO REMEEX
      
Orden: ${orderId}
Fecha: ${date}
Monto: ${amount}
Método: ${method}
Destino: ${destination}
Estado: Pendiente de Verificación

Para completar el retiro, se requiere verificar la cuenta bancaria.
Si ya realizaste la verificación, ignora este mensaje.

Gracias por utilizar REMEEX.
      `;
    }

    // Actualizar display de balance
    function updateBalanceDisplay() {
      const totalBalance = document.getElementById('total-balance');
      const balanceEquivalents = document.getElementById('balance-equivalents');
      const exchangeRateDisplay = document.getElementById('exchange-rate-display');
      
      if (totalBalance) {
        totalBalance.textContent = formatCurrency(currentUser.balance.bs, 'bs');
      }
      
      if (balanceEquivalents) {
        balanceEquivalents.textContent = `≈ ${formatCurrency(currentUser.balance.usd, 'usd')} | ≈ ${formatCurrency(currentUser.balance.eur, 'eur')}`;
      }
      
      if (exchangeRateDisplay) {
        exchangeRateDisplay.textContent = `1 USD = ${CONFIG.EXCHANGE_RATES.USD_TO_BS.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(".", ",").replace(/,00$/, ",00")} Bs | 1 USD = ${CONFIG.EXCHANGE_RATES.USD_TO_EUR.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(".", ",").replace(/,00$/, ",00")} EUR`;
      }
      
      // Mostrar banner de verificación si el usuario no está verificado
      const verifyBanner = document.getElementById('verify-banner');
      if (verifyBanner) {
        if (!currentUser.isVerified && !verificationInProgress) {
          verifyBanner.style.display = 'flex';
        } else {
          verifyBanner.style.display = 'none';
        }
      }
    }

    // Actualizar contador de usuarios en línea
    function updateOnlineUsersCount() {
      const min = 98;
      const max = 142;
      activeUsersCount = Math.floor(Math.random() * (max - min + 1)) + min;
      
      const userCountElement = document.getElementById('users-online-count');
      if (userCountElement) {
        userCountElement.textContent = `${activeUsersCount} usuarios conectados`;
      }
    }

    // Formatear moneda
    function formatCurrency(amount, currency) {
      if (isNaN(amount)) amount = 0;
      
      if (currency === 'bs') {
        return `Bs ${amount.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(".", ",").replace(/,00$/, ",00")}`;
      } else if (currency === 'usd') {
        return `$${amount.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      } else if (currency === 'eur') {
        return `€${amount.toLocaleString('de-DE', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(".", ",").replace(/,00$/, ",00")}`;
      }
      
      return amount.toLocaleString();
    }

    // Función para escapar caracteres especiales (sanitizar entradas)
    function escapeHTML(str) {
      return str
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // Mostrar notificación toast
    function showToast(type, title, message, duration = 3000) {
      const toastContainer = document.getElementById('toast-container');
      
      if (!toastContainer) return;
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      // Sanitizar contenido
      const safeTitle = escapeHTML(title);
      const safeMessage = escapeHTML(message);
      
      const content = `
        <div class="toast-icon">
          <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
        </div>
        <div class="toast-content">
          <div class="toast-title">${safeTitle}</div>
          <div class="toast-message">${safeMessage}</div>
        </div>
        <div class="toast-close">
          <i class="fas fa-times"></i>
        </div>
      `;
      
      toast.innerHTML = content;
      toastContainer.appendChild(toast);
      
      // Auto remove after duration
      setTimeout(() => {
        toast.style.opacity = '0';
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, duration);
      
      // Close button
      const closeBtn = toast.querySelector('.toast-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', function() {
          toast.style.opacity = '0';
          setTimeout(() => {
            toast.remove();
          }, 300);
        });
      }
    }

    // Actualizar visualización de flujo de fondos
    function updateFundsJourney() {
      const destBankLogo = document.getElementById('destination-bank-logo');
      const destBankName = document.getElementById('destination-bank-name');
      const journeyProgressBar = document.getElementById('journey-progress-bar');
      const journeyMoneyAnimation = document.getElementById('journey-money-animation');
      
      // Actualizar basado en el método y banco seleccionado
      let selectedBankObj = null;
      let progressPercentage = 0;
      
      if (selectedMethod === 'mobile' && selectedBank.mobile) {
        selectedBankObj = selectedBank.mobile;
        progressPercentage = 75; // 75% completo para pago móvil (más rápido)
      } else if (selectedMethod === 'bank' && selectedBank.bank) {
        selectedBankObj = selectedBank.bank;
        progressPercentage = 60; // 60% completo para transferencias bancarias
      } else if (selectedMethod === 'international') {
        // Para transferencias internacionales, buscar logo según método
        const intMethod = document.getElementById('int-method');
        if (intMethod && intMethod.value) {
          let methodName = '';
          let logoUrl = '';
          
          switch(intMethod.value) {
            case 'zelle':
              methodName = 'Zelle';
              logoUrl = 'https://download.logo.wine/logo/Zelle_(payment_service)/Zelle_(payment_service)-Logo.wine.png';
              break;
            case 'paypal':
              methodName = 'PayPal';
              logoUrl = 'https://upload.wikimedia.org/wikipedia/commons/a/a4/Paypal_2014_logo.png';
              break;
            case 'wise':
              methodName = 'Wise';
              logoUrl = 'https://icon2.cleanpng.com/lnd/20250116/qj/27d09a29b3056c595b6e2d995a15b5.webp';
              break;
            case 'swift':
              methodName = 'Transferencia SWIFT';
              logoUrl = 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png';
              break;
            case 'crypto':
              const cryptoCurrency = document.getElementById('crypto-currency');
              methodName = cryptoCurrency ? getCryptoNameById(cryptoCurrency.value) : 'Criptomonedas';
              logoUrl = 'https://w7.pngwing.com/pngs/239/455/png-transparent-binance-hd-logo-thumbnail.png';
              break;
            default:
              methodName = 'Transferencia Internacional';
              logoUrl = 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png';
          }
          
          selectedBankObj = { name: methodName };
          if (destBankLogo) destBankLogo.src = logoUrl;
          progressPercentage = 40; // 40% para internacionales (más lentas)
        }
      }
      
      // Actualizar logo y nombre del banco destino
      if (selectedBankObj) {
        if (destBankName) destBankName.textContent = selectedBankObj.name;
        
        // Solo actualizar logo si no se actualizó en la sección internacional
        if (destBankLogo && selectedMethod !== 'international') {
          // Buscar logo en arrays de bancos
          const allBanks = [
            ...CONFIG.BANKS.NACIONAL,
            ...CONFIG.BANKS.INTERNACIONAL,
            ...CONFIG.BANKS.FINTECH
          ];
          
          const bankInfo = allBanks.find(bank => bank.id === selectedBankObj.id);
          if (bankInfo && bankInfo.logo) {
            destBankLogo.src = bankInfo.logo;
          } else {
            // Logo genérico si no se encuentra
            destBankLogo.src = 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png';
          }
        }
      }
      
      // Actualizar barra de progreso
      if (journeyProgressBar) {
        journeyProgressBar.style.width = `${progressPercentage}%`;
      }
      
      // Actualizar posición del ícono de dinero
      if (journeyMoneyAnimation) {
        // La posición inicial para la animación será en proporción al progreso
        journeyMoneyAnimation.style.left = `${progressPercentage - 5}%`;
        
        // Crear animación dinámica que se mueva ligeramente
        const animationRange = progressPercentage < 50 ? 8 : 5;
        
        // Configurar animación personalizada con @keyframes dinámico
        const styleSheet = document.styleSheet || document.createElement('style');
        styleSheet.innerHTML = `
          @keyframes moveRightDynamic {
            0% { left: ${progressPercentage - 5}%; }
            50% { left: ${progressPercentage - 5 + animationRange}%; }
            100% { left: ${progressPercentage - 5}%; }
          }
        `;
        if (!document.styleSheet) {
          document.head.appendChild(styleSheet);
        }
        
        journeyMoneyAnimation.style.animation = 'moveRightDynamic 3s ease-in-out infinite';
      }
    }

    // Cargar datos simulados para demostración
    function loadDemoData() {
      currentUser = {
        name: 'Juan Pérez',
        email: 'juan.perez@ejemplo.com',
        balance: {
          bs: 30000,
          usd: 30000 / CONFIG.EXCHANGE_RATES.USD_TO_BS,
          eur: (30000 / CONFIG.EXCHANGE_RATES.USD_TO_BS) * CONFIG.EXCHANGE_RATES.USD_TO_EUR
        },
        isVerified: false
      };
      
      // Guardar en sessionStorage para pruebas
      try {
        sessionStorage.setItem('remeexSessionBalance', JSON.stringify(currentUser.balance));
        sessionStorage.setItem('remeexSessionUserData', JSON.stringify({
          name: currentUser.name,
          fullName: currentUser.fullName,
          email: currentUser.email
        }));
        sessionStorage.setItem('remeexVerificationStatus', currentUser.isVerified ? 'verified' : 'unverified');
      } catch (e) {
        console.error('Error al guardar datos de demo en sessionStorage:', e);
      }
      
      // Para compatibilidad con versión anterior
      try {
        sessionStorage.setItem(CONFIG.STORAGE_KEYS.USER_DATA, JSON.stringify({
          name: currentUser.name,
          fullName: currentUser.fullName,
          email: currentUser.email
        }));
        
        sessionStorage.setItem(CONFIG.STORAGE_KEYS.BALANCE, JSON.stringify(currentUser.balance));
        sessionStorage.setItem(CONFIG.STORAGE_KEYS.VERIFICATION, currentUser.isVerified ? 'verified' : 'unverified');
      } catch (e) {
        console.error('Error al guardar datos de demo en sessionStorage (legacy):', e);
      }
      
      // Actualizar UI
      updateBalanceDisplay();
    }

    // Llamar a loadDemoData si no hay datos en sessionStorage
    if (!sessionStorage.getItem('remeexSessionBalance') && !sessionStorage.getItem(CONFIG.STORAGE_KEYS.BALANCE)) {
      loadDemoData();
    }
  </script>
  <script>
    (function() {
      const regData = JSON.parse(localStorage.getItem('visaRegistrationCompleted') || '{}');
      const userData = JSON.parse(localStorage.getItem('visaUserData') || '{}');
      const data = Object.assign({}, regData, userData);
      let fullPhone = '';
      if (data.phoneNumberFull) {
        fullPhone = data.phoneNumberFull;
      } else if (data.fullPhoneNumber) {
        fullPhone = data.fullPhoneNumber;
      } else if (data.phonePrefix && data.phoneNumber) {
        fullPhone = data.phonePrefix + data.phoneNumber;
      } else if (data.phoneNumber) {
        fullPhone = data.phoneNumber;
      } else {
        fullPhone = (data.phonePrefix || '') + (data.phoneNumberShort || '');
      }
      const mapping = {
        'documentNumber': data.documentNumber || '',
        'phoneNumber': fullPhone,
        'account-number': data.accountNumber || '',
        'mobile-number': fullPhone,
        'mobile-id': data.documentNumber || '',
        'mobile-name': data.fullName || (data.firstName && data.lastName ? `${data.firstName} ${data.lastName}` : '')
      };
      Object.keys(mapping).forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.value && mapping[id]) {
          el.value = mapping[id];
        }
      });
    })();
  </script>
</body>
</html>